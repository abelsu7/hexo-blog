<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?c61262c25ca5d4ed66df331a31b5bf49"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="cc3c_UncRv21aEZwqejVxKpUMR7h9ldNUTeYjawUS-g">
    
    
    <meta name="baidu-site-verification" content="HnoV7q61W5">
    
    
    
    <title>HTTP 笔记 3：Web 服务器及 HTTP 首部 | Keep Coding | 苏易北</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="读书,HTTP">
    <meta name="description" content="《图解HTTP》">
<meta name="keywords" content="读书,HTTP">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP 笔记 3：Web 服务器及 HTTP 首部">
<meta property="og:url" content="https://abelsu7.top/2018/10/22/http-notes-part-3/index.html">
<meta property="og:site_name" content="Keep Coding">
<meta property="og:description" content="《图解HTTP》">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/cover.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199885115.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199885389.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199885517.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199885846.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199888067.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199888347.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199888435.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737859012.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737859222.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737859351.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737859434.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199889048.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737860349.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737870852.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199889880.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199892826.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199893394.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/737880511.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199895450.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/199902411.jpg">
<meta property="og:updated_time" content="2019-09-01T13:04:11.359Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTTP 笔记 3：Web 服务器及 HTTP 首部">
<meta name="twitter:description" content="《图解HTTP》">
<meta name="twitter:image" content="https://abelsu7.top/2018/10/22/http-notes-part-3/cover.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="Keep Coding" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <link rel="stylesheet" href="/css/prism/prism-tomorrow-night.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-list-ul"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/back_blue.png)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/fong.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Abel Su</h5>
          <a href="mailto:abelsu7@gmail.com" title="abelsu7@gmail.com" class="mail">abelsu7@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top"  >
                <i class="icon icon-lg icon-sticky-note"></i>
                笔记
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/abelsu7"  >
                <i class="icon icon-lg icon-github"></i>
                代码
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friends/"  >
                <i class="icon icon-lg icon-user"></i>
                友链
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/bookmarks/"  >
                <i class="icon icon-lg icon-bookmark"></i>
                收藏
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/books/"  >
                <i class="icon icon-lg icon-book"></i>
                读书
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/movies/"  >
                <i class="icon icon-lg icon-film"></i>
                影视
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/games/"  >
                <i class="icon icon-lg icon-gamepad"></i>
                游戏
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top/#/links/wechat"  >
                <i class="icon icon-lg icon-wechat"></i>
                微信
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/2018/09/21/how-to-learn-coding/"  >
                <i class="icon icon-lg icon-code"></i>
                学习
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/wiki/"  >
                <i class="icon icon-lg icon-sort-alpha-asc"></i>
                速查
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-info-circle"></i>
                关于
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">HTTP 笔记 3：Web 服务器及 HTTP 首部</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">HTTP 笔记 3：Web 服务器及 HTTP 首部</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-10-22T07:34:42.000Z" itemprop="datePublished" class="page-time">
  2018-10-22
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/计算机网络/">计算机网络</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#目录"><span class="post-toc-text">目录</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第-5-章-与-HTTP-协作的-Web-服务器"><span class="post-toc-text">第 5 章 与 HTTP 协作的 Web 服务器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-用单台虚拟主机实现多个域名"><span class="post-toc-text">5.1 用单台虚拟主机实现多个域名</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-通信数据转发程序：代理、网关、隧道"><span class="post-toc-text">5.2 通信数据转发程序：代理、网关、隧道</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-1-代理"><span class="post-toc-text">5.2.1 代理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-2-网关"><span class="post-toc-text">5.2.2 网关</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-2-3-隧道"><span class="post-toc-text">5.2.3 隧道</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-保存资源的缓存"><span class="post-toc-text">5.3 保存资源的缓存</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-1-缓存的有效期限"><span class="post-toc-text">5.3.1 缓存的有效期限</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-3-2-客户端的缓存"><span class="post-toc-text">5.3.2 客户端的缓存</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第-6-章-HTTP-首部"><span class="post-toc-text">第 6 章 HTTP 首部</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-1-HTTP-报文首部"><span class="post-toc-text">6.1 HTTP 报文首部</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-HTTP-首部字段"><span class="post-toc-text">6.2 HTTP 首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-1-HTTP-首部字段传递重要信息"><span class="post-toc-text">6.2.1 HTTP 首部字段传递重要信息</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-2-HTTP-首部字段结构"><span class="post-toc-text">6.2.2 HTTP 首部字段结构</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-3-4-种-HTTP-首部字段类型"><span class="post-toc-text">6.2.3 4 种 HTTP 首部字段类型</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-4-HTTP-1-1-首部字段一览"><span class="post-toc-text">6.2.4 HTTP/1.1 首部字段一览</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-5-非-HTTP-1-1-首部字段"><span class="post-toc-text">6.2.5 非 HTTP/1.1 首部字段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-6-End-to-end-首部和-Hop-by-hop-首部"><span class="post-toc-text">6.2.6 End-to-end 首部和 Hop-by-hop 首部</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-HTTP-1-1-通用首部字段"><span class="post-toc-text">6.3 HTTP/1.1 通用首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-1-Cache-Control"><span class="post-toc-text">6.3.1 Cache-Control</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-2-Connection"><span class="post-toc-text">6.3.2 Connection</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-3-Date"><span class="post-toc-text">6.3.3 Date</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-4-Pragma"><span class="post-toc-text">6.3.4 Pragma</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-5-Trailer"><span class="post-toc-text">6.3.5 Trailer</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-6-Transfer-Encoding"><span class="post-toc-text">6.3.6 Transfer-Encoding</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-7-Upgrade"><span class="post-toc-text">6.3.7 Upgrade</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-8-Via"><span class="post-toc-text">6.3.8 Via</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-9-Warning"><span class="post-toc-text">6.3.9 Warning</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-4-请求首部字段"><span class="post-toc-text">6.4 请求首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-1-Accept"><span class="post-toc-text">6.4.1 Accept</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-2-Accept-Charset"><span class="post-toc-text">6.4.2 Accept-Charset</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-3-Accept-Encoding"><span class="post-toc-text">6.4.3 Accept-Encoding</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-4-Accept-Language"><span class="post-toc-text">6.4.4 Accept-Language</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-5-Authorization"><span class="post-toc-text">6.4.5 Authorization</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-6-Expect"><span class="post-toc-text">6.4.6 Expect</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-7-From"><span class="post-toc-text">6.4.7 From</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-8-Host"><span class="post-toc-text">6.4.8 Host</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-9-If-Match"><span class="post-toc-text">6.4.9 If-Match</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-10-If-Modified-Since"><span class="post-toc-text">6.4.10 If-Modified-Since</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-11-If-None-Match"><span class="post-toc-text">6.4.11 If-None-Match</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-12-If-Range"><span class="post-toc-text">6.4.12 If-Range</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-13-If-Unmodified-Since"><span class="post-toc-text">6.4.13 If-Unmodified-Since</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-14-Max-Forwards"><span class="post-toc-text">6.4.14 Max-Forwards</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-15-Proxy-Authorization"><span class="post-toc-text">6.4.15 Proxy-Authorization</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-16-Range"><span class="post-toc-text">6.4.16 Range</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-17-Referer"><span class="post-toc-text">6.4.17 Referer</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-18-TE"><span class="post-toc-text">6.4.18 TE</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-4-19-User-Agent"><span class="post-toc-text">6.4.19 User-Agent</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-5-响应首部字段"><span class="post-toc-text">6.5 响应首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-1-Accept-Ranges"><span class="post-toc-text">6.5.1 Accept-Ranges</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-2-Age"><span class="post-toc-text">6.5.2 Age</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-3-ETag"><span class="post-toc-text">6.5.3 ETag</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-4-Location"><span class="post-toc-text">6.5.4 Location</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-5-Proxy-Authenticate"><span class="post-toc-text">6.5.5 Proxy-Authenticate</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-6-Retry-After"><span class="post-toc-text">6.5.6 Retry-After</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-7-Server"><span class="post-toc-text">6.5.7 Server</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-8-Vary"><span class="post-toc-text">6.5.8 Vary</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-5-9-WWW-Authenticate"><span class="post-toc-text">6.5.9 WWW-Authenticate</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-6-实体首部字段"><span class="post-toc-text">6.6 实体首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-1-Allow"><span class="post-toc-text">6.6.1 Allow</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-2-Content-Encoding"><span class="post-toc-text">6.6.2 Content-Encoding</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-3-Content-Language"><span class="post-toc-text">6.6.3 Content-Language</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-4-Content-Length"><span class="post-toc-text">6.6.4 Content-Length</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-5-Content-Location"><span class="post-toc-text">6.6.5 Content-Location</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-6-Content-MD5"><span class="post-toc-text">6.6.6 Content-MD5</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-7-Content-Range"><span class="post-toc-text">6.6.7 Content-Range</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-8-Content-Type"><span class="post-toc-text">6.6.8 Content-Type</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-9-Expires"><span class="post-toc-text">6.6.9 Expires</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-6-10-Last-Modified"><span class="post-toc-text">6.6.10 Last-Modified</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-7-为-Cookie-服务的首部字段"><span class="post-toc-text">6.7 为 Cookie 服务的首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-7-1-Set-Cookie"><span class="post-toc-text">6.7.1 Set-Cookie</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-7-2-Cookie"><span class="post-toc-text">6.7.2 Cookie</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-8-其他首部字段"><span class="post-toc-text">6.8 其他首部字段</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-8-1-X-Frame-Options"><span class="post-toc-text">6.8.1 X-Frame-Options</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-8-2-X-XSS-Protection"><span class="post-toc-text">6.8.2 X-XSS-Protection</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-8-3-DNT"><span class="post-toc-text">6.8.3 DNT</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-8-4-P3P"><span class="post-toc-text">6.8.4 P3P</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-http-notes-part-3"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">HTTP 笔记 3：Web 服务器及 HTTP 首部</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-10-22 15:34:42" datetime="2018-10-22T07:34:42.000Z"  itemprop="datePublished">2018-10-22</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/计算机网络/">计算机网络</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/cover.jpg" alt="《图解HTTP》" title>
                </div>
                <div class="image-caption">《图解HTTP》</div>
            </figure>
<a id="more"></a>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#目录">目录</a></li>
<li><a href="#第-5-章-与-HTTP-协作的-Web-服务器">第 5 章 与 HTTP 协作的 Web 服务器</a><ul>
<li><a href="#5-1-用单台虚拟主机实现多个域名">5.1 用单台虚拟主机实现多个域名</a></li>
<li><a href="#5-2-通信数据转发程序代理网关隧道">5.2 通信数据转发程序：代理、网关、隧道</a><ul>
<li><a href="#5-2-1-代理">5.2.1 代理</a></li>
<li><a href="#5-2-2-网关">5.2.2 网关</a></li>
<li><a href="#5-2-3-隧道">5.2.3 隧道</a></li>
</ul>
</li>
<li><a href="#5-3-保存资源的缓存">5.3 保存资源的缓存</a><ul>
<li><a href="#5-3-1-缓存的有效期限">5.3.1 缓存的有效期限</a></li>
<li><a href="#5-3-2-客户端的缓存">5.3.2 客户端的缓存</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#第-6-章-HTTP-首部">第 6 章 HTTP 首部</a><ul>
<li><a href="#6-1-HTTP-报文首部">6.1 HTTP 报文首部</a></li>
<li><a href="#6-2-HTTP-首部字段">6.2 HTTP 首部字段</a><ul>
<li><a href="#6-2-1-HTTP-首部字段传递重要信息">6.2.1 HTTP 首部字段传递重要信息</a></li>
<li><a href="#6-2-2-HTTP-首部字段结构">6.2.2 HTTP 首部字段结构</a></li>
<li><a href="#6-2-3-4-种-HTTP-首部字段类型">6.2.3 4 种 HTTP 首部字段类型</a></li>
<li><a href="#6-2-4-HTTP-1-1-首部字段一览">6.2.4 HTTP/1.1 首部字段一览</a></li>
<li><a href="#6-2-5-非-HTTP-1-11-首部字段">6.2.5 非 HTTP/1.1 首部字段</a></li>
<li><a href="#6-2-6-End-to-end-首部和-Hop-by-hop-首部">6.2.6 End-to-end 首部和 Hop-by-hop 首部</a></li>
</ul>
</li>
<li><a href="#6-3-HTTP-1-1-通用首部字段">6.3 HTTP/1.1 通用首部字段</a><ul>
<li><a href="#6-3-1-Cache-Control">6.3.1 Cache-Control</a></li>
<li><a href="#6-3-2-Connection">6.3.2 Connection</a></li>
<li><a href="#6-3-3-Date">6.3.3 Date</a></li>
<li><a href="#6-3-4-Pragma">6.3.4 Pragma</a></li>
<li><a href="#6-3-5-Trailer">6.3.5 Trailer</a></li>
<li><a href="#6-3-6-Transfer-Encoding">6.3.6 Transfer-Encoding</a></li>
<li><a href="#6-3-7-Upgrade">6.3.7 Upgrade</a></li>
<li><a href="#6-3-8-Via">6.3.8 Via</a></li>
<li><a href="#6-3-9-Warning">6.3.9 Warning</a></li>
</ul>
</li>
<li><a href="#6-4-请求首部字段">6.4 请求首部字段</a><ul>
<li><a href="#6-4-1-Accept">6.4.1 Accept</a></li>
<li><a href="#6-4-2-Accept-Charset">6.4.2 Accept-Charset</a></li>
<li><a href="#6-4-3-Accept-Encoding">6.4.3 Accept-Encoding</a></li>
<li><a href="#6-4-4-Accept-Language">6.4.4 Accept-Language</a></li>
<li><a href="#6-4-5-Authorization">6.4.5 Authorization</a></li>
<li><a href="#6-4-6-Expect">6.4.6 Expect</a></li>
<li><a href="#6-4-7-From">6.4.7 From</a></li>
<li><a href="#6-4-8-Host">6.4.8 Host</a></li>
<li><a href="#6-4-9-If-Match">6.4.9 If-Match</a></li>
<li><a href="#6-4-10-If-Modified-Since">6.4.10 If-Modified-Since</a></li>
<li><a href="#6-4-11-If-None-Match">6.4.11 If-None-Match</a></li>
<li><a href="#6-4-12-If-Range">6.4.12 If-Range</a></li>
<li><a href="#6-4-13-If-Unmodified-Since">6.4.13 If-Unmodified-Since</a></li>
<li><a href="#6-4-14-Max-Forwards">6.4.14 Max-Forwards</a></li>
<li><a href="#6-4-15-Proxy-Authorization">6.4.15 Proxy-Authorization</a></li>
<li><a href="#6-4-16-Range">6.4.16 Range</a></li>
<li><a href="#6-4-17-Referer">6.4.17 Referer</a></li>
<li><a href="#6-4-18-TE">6.4.18 TE</a></li>
<li><a href="#6-4-19-User-Agent">6.4.19 User-Agent</a></li>
</ul>
</li>
<li><a href="#6-5-响应首部字段">6.5 响应首部字段</a><ul>
<li><a href="#6-5-1-Accept-Ranges">6.5.1 Accept-Ranges</a></li>
<li><a href="#6-5-2-Age">6.5.2 Age</a></li>
<li><a href="#6-5-3-ETag">6.5.3 ETag</a></li>
<li><a href="#6-5-4-Location">6.5.4 Location</a></li>
<li><a href="#6-5-5-Proxy-Authenticate">6.5.5 Proxy-Authenticate</a></li>
<li><a href="#6-5-6-Retry-After">6.5.6 Retry-After</a></li>
<li><a href="#6-5-7-Server">6.5.7 Server</a></li>
<li><a href="#6-5-8-Vary">6.5.8 Vary</a></li>
<li><a href="#6-5-9-WWW-Authenticate">6.5.9 WWW-Authenticate</a></li>
</ul>
</li>
<li><a href="#6-6-实体首部字段">6.6 实体首部字段</a><ul>
<li><a href="#6-6-1-Allow">6.6.1 Allow</a></li>
<li><a href="#6-6-2-Content-Encoding">6.6.2 Content-Encoding</a></li>
<li><a href="#6-6-3-Content-Language">6.6.3 Content-Language</a></li>
<li><a href="#6-6-4-Content-Length">6.6.4 Content-Length</a></li>
<li><a href="#6-6-5-Content-Location">6.6.5 Content-Location</a></li>
<li><a href="#6-6-6-Content-MD5">6.6.6 Content-MD5</a></li>
<li><a href="#6-6-7-Content-Range">6.6.7 Content-Range</a></li>
<li><a href="#6-6-8-Content-Type">6.6.8 Content-Type</a></li>
<li><a href="#6-6-9-Expires">6.6.9 Expires</a></li>
<li><a href="#6-6-10-Last-Modified">6.6.10 Last-Modified</a></li>
</ul>
</li>
<li><a href="#6-7-为-Cookie-服务的首部字段">6.7 为 Cookie 服务的首部字段</a><ul>
<li><a href="#6-7-1-Set-Cookie">6.7.1 Set-Cookie</a></li>
<li><a href="#6-7-2-Cookie">6.7.2 Cookie</a></li>
</ul>
</li>
<li><a href="#6-8-其他首部字段">6.8 其他首部字段</a><ul>
<li><a href="#6-8-1-X-Frame-Options">6.8.1 X-Frame-Options</a></li>
<li><a href="#6-8-2-X-XSS-Protection">6.8.2 X-XSS-Protection</a></li>
<li><a href="#6-8-3-DNT">6.8.3 DNT</a></li>
<li><a href="#6-8-4-P3P">6.8.4 P3P</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第-5-章-与-HTTP-协作的-Web-服务器"><a href="#第-5-章-与-HTTP-协作的-Web-服务器" class="headerlink" title="第 5 章 与 HTTP 协作的 Web 服务器"></a>第 5 章 与 HTTP 协作的 Web 服务器</h2><p>一台 Web 服务器可搭建多个独立域名的 Web 网站，也可作为通信路径上的中转服务器提升传输效率。</p>
<h3 id="5-1-用单台虚拟主机实现多个域名"><a href="#5-1-用单台虚拟主机实现多个域名" class="headerlink" title="5.1 用单台虚拟主机实现多个域名"></a>5.1 用单台虚拟主机实现多个域名</h3><p>HTTP/1.1 规范<strong>允许一台 HTTP 服务器搭建多个 Web 站点</strong>。比如，提供 Web 托管服务（Web Hosting Service）的供应商，可以用一台服务器为多位客户服务，也可以以每位客户持有的域名运行各自不同的网站。这是因为利用了<strong>虚拟主机</strong>（Virtual Host，又称虚拟服务器）的功能。</p>
<p>在互联网上，域名通过 DNS 服务映射到 IP 地址（域名解析）之后访问目标网站。可见，当请求发送到服务器时，已经是以 IP 地址形式访问了。</p>
<p>所以，如果一台服务器内托管了<code>www.tricorder.jp</code>和<code>www.hackr.jp</code>这两个域名，当收到请求时就需要弄清楚究竟要访问哪个域名。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199885115.jpg" alt="多个域名解析至同一IP" title>
                </div>
                <div class="image-caption">多个域名解析至同一IP</div>
            </figure>
<p>在相同的 IP 地址下，由于<strong>虚拟主机可以寄存多个不同主机名和域名的 Web 网站</strong>，因此在发送 HTTP 请求时，<strong>必须在 Host 首部内完整指定主机名或域名的 URI</strong>。</p>
<h3 id="5-2-通信数据转发程序：代理、网关、隧道"><a href="#5-2-通信数据转发程序：代理、网关、隧道" class="headerlink" title="5.2 通信数据转发程序：代理、网关、隧道"></a>5.2 通信数据转发程序：代理、网关、隧道</h3><p>HTTP 通信时，除客户端和服务器以外，还有一些用于<strong>通信数据转发</strong>的应用程序，例如<strong>代理、网关和隧道</strong>。它们可以<strong>配合服务器工作</strong>。</p>
<p>这些应用程序和服务器可以<strong>将请求转发给通信线路上的下一站服务器</strong>，并且<strong>能接收从那台服务器发送的响应再转发给客户端</strong>。</p>
<ul>
<li>代理</li>
</ul>
<blockquote>
<p>代理是一种有转发功能的应用程序，它<strong>扮演了位于服务器和客户端“中间人”的角色</strong>，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。</p>
</blockquote>
<ul>
<li>网关</li>
</ul>
<blockquote>
<p>网关是<strong>转发其他服务器通信数据的服务器</strong>，接收从客户端发送来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理。有时客户端可能都不会察觉，自己的通信目标是一个网关。</p>
</blockquote>
<ul>
<li>隧道</li>
</ul>
<blockquote>
<p>隧道是在相隔甚远的客户端和服务器两者之间<strong>进行中转，并保持双方通信连接</strong>的应用程序。</p>
</blockquote>
<h4 id="5-2-1-代理"><a href="#5-2-1-代理" class="headerlink" title="5.2.1 代理"></a>5.2.1 代理</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199885389.jpg" alt="代理服务器的基本行为" title>
                </div>
                <div class="image-caption">代理服务器的基本行为</div>
            </figure>
<p>代理服务器的基本行为就是<strong>接收客户端发送的请求后转发给其他服务器</strong>。<strong>代理不改变请求 URI</strong>，会直接发送给前方持有资源的目标服务器。</p>
<p><strong>持有资源实体的服务器</strong>被称为<strong>源服务器</strong>。从源服务器返回的响应经过代理服务器后再传给客户端。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199885517.jpg" alt="多台代理服务器级联，追加写入Via首部信息" title>
                </div>
                <div class="image-caption">多台代理服务器级联，追加写入Via首部信息</div>
            </figure>
<p>在 HTTP 通信过程中，可<strong>级联多台代理服务器</strong>。请求和响应的转发会经过数台类似锁链一样连接起来的代理服务器。转发时，需要附加<code>Via</code>首部字段以标记出经过的主机信息。</p>
<blockquote>
<p>使用代理服务器的理由有：利用缓存技术<strong>减少网络带宽</strong>的流量，组织内部针对特定网站的<strong>访问控制</strong>，以<strong>获取访问日志</strong>为主要目的，等等。</p>
</blockquote>
<p>代理有多种使用方法，按两种基准分类。一种是<strong>是否使用缓存</strong>，另一种是<strong>是否会修改报文</strong>。</p>
<ul>
<li><strong>缓存代理</strong></li>
</ul>
<blockquote>
<p>代理转发响应时，<strong>缓存代理</strong>（Caching Proxy）会预先将<strong>资源的副本（缓存）</strong>保存在代理服务器上。当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是<strong>将之前缓存的资源作为响应返回</strong>。</p>
</blockquote>
<ul>
<li><strong>透明代理</strong></li>
</ul>
<blockquote>
<p>转发请求或响应时，<strong>不对报文做任何加工</strong>的代理类型被称为<strong>透明代理</strong>（Transparent Proxy）。反之，对报文内容进行加工的代理被称为<strong>非透明代理</strong>。</p>
</blockquote>
<h4 id="5-2-2-网关"><a href="#5-2-2-网关" class="headerlink" title="5.2.2 网关"></a>5.2.2 网关</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199885846.jpg" alt="利用网关可以由HTTP请求转化为其他协议通信" title>
                </div>
                <div class="image-caption">利用网关可以由HTTP请求转化为其他协议通信</div>
            </figure>
<p>网关的工作机制和代理十分相似。而<strong>网关能使通信线路上的服务器提供非 HTTP 协议服务</strong>。</p>
<p>利用网关能<strong>提高通信的安全性</strong>，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。比如，网关可以连接数据库，使用 SQL 语句查询数据。另外，在 Web 购物网站上进行信用卡结算时，网关可以和信用卡结算系统联动。</p>
<h4 id="5-2-3-隧道"><a href="#5-2-3-隧道" class="headerlink" title="5.2.3 隧道"></a>5.2.3 隧道</h4><p>隧道可按要求建立起一条与其他服务器的通信线路，届时使用 SSL 等加密手段进行通信。隧道的目的是<strong>确保客户端能与服务器进行安全的通信</strong>。</p>
<p><strong>隧道本身不会去解析 HTTP 请求</strong>。也就是说，<strong>请求保持原样中转给之后的服务器</strong>。隧道会在通信双方断开连接时结束。</p>
<h3 id="5-3-保存资源的缓存"><a href="#5-3-保存资源的缓存" class="headerlink" title="5.3 保存资源的缓存"></a>5.3 保存资源的缓存</h3><p>缓存是指代理服务器或客户端本地磁盘内保存的资源副本。<strong>利用缓存可减少对源服务器的访问</strong>，因此也就节省了通信流量和通信时间。</p>
<p><strong>缓存服务器是代理服务器</strong>的一种，并归类在缓存代理类型中。换句话说，当代理转发从服务器返回的响应时，代理服务器将会保存一份资源的副本。</p>
<p>缓存服务器的优势在于<strong>利用缓存可避免多次从源服务器转发资源</strong>。因此客户端可就近从缓存服务器上获取资源，而源服务器也不必多次处理相同的请求了。</p>
<h4 id="5-3-1-缓存的有效期限"><a href="#5-3-1-缓存的有效期限" class="headerlink" title="5.3.1 缓存的有效期限"></a>5.3.1 缓存的有效期限</h4><p>即便缓存服务器内有缓存，也不能保证每次都会返回对同资源的请求。因为这关系到<strong>被缓存资源的有效性问题</strong>。</p>
<p>当遇上源服务器上的资源更新时，如果还是使用不变的缓存，那就会演变成返回更新前的“旧”资源了。</p>
<p>即使存在缓存，也会因为客户端的要求、缓存的有效期等因素，向源服务器确认资源的有效性。若<strong>判断缓存失效</strong>，缓存服务器将会<strong>再次从源服务器上获取“新”资源</strong>。</p>
<h4 id="5-3-2-客户端的缓存"><a href="#5-3-2-客户端的缓存" class="headerlink" title="5.3.2 客户端的缓存"></a>5.3.2 客户端的缓存</h4><p>缓存不仅可以存在于缓存服务器内，还可以存在客户端浏览器中，客户端缓存称为<strong>临时网络文件</strong>（Temporary Internet File）。</p>
<p>浏览器缓存如果有效，就不必再向服务器请求相同的资源了，可以直接从本地磁盘内读取。</p>
<p>另外，和缓存服务器相同的一点是，<strong>当判定缓存过期后，会向源服务器确认资源的有效性</strong>。若判断浏览器缓存失效，浏览器会再次请求新资源。</p>
<h2 id="第-6-章-HTTP-首部"><a href="#第-6-章-HTTP-首部" class="headerlink" title="第 6 章 HTTP 首部"></a>第 6 章 HTTP 首部</h2><h3 id="6-1-HTTP-报文首部"><a href="#6-1-HTTP-报文首部" class="headerlink" title="6.1 HTTP 报文首部"></a>6.1 HTTP 报文首部</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199888067.jpg" alt="HTTP报文的结构" title>
                </div>
                <div class="image-caption">HTTP报文的结构</div>
            </figure>
<p>HTTP 协议的<strong>请求和响应报文中必定包含 HTTP 首部</strong>。首部内容为客户端和服务器分别处理请求和响应提供所需要的信息。</p>
<p><strong>HTTP 请求报文</strong></p>
<p>在请求中，HTTP 报文由<strong>方法、URI、HTTP 版本、HTTP 首部字段</strong>等部分构成。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199888347.jpg" alt="HTTP请求报文" title>
                </div>
                <div class="image-caption">HTTP请求报文</div>
            </figure>
<p>下面的示例是访问<code>http://hackr.jp</code>时，请求报文的首部信息。</p>
<pre><code class="lang-http">GET / HTTP/1.1
Host: hackr.jp
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*; q=0.8
Accept-Language: ja,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
If-Modified-Since: Fri, 31 Aug 2007 02:02:20 GMT
If-None-Match: &quot;45bae1-16a-46d776ac&quot;
Cache-Control: max-age=0
</code></pre>
<p><strong>HTTP 响应报文</strong></p>
<p>在响应中，HTTP 报文由 <strong>HTTP 版本、状态码、HTTP 首部字段</strong> 3 部分构成。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199888435.jpg" alt="HTTP响应报文" title>
                </div>
                <div class="image-caption">HTTP响应报文</div>
            </figure>
<p>以下示例是之前请求访问<code>http://hackr.jp/</code>时，返回的响应报文的首部信息。</p>
<pre><code class="lang-http">HTTP/1.1 304 Not Modified
Date: Thu, 07 Jun 2012 07:21:36 GMT
Server: Apache
Connection: close
Etag: &quot;45bae1-16a-46d776ac&quot;
</code></pre>
<h3 id="6-2-HTTP-首部字段"><a href="#6-2-HTTP-首部字段" class="headerlink" title="6.2 HTTP 首部字段"></a>6.2 HTTP 首部字段</h3><h4 id="6-2-1-HTTP-首部字段传递重要信息"><a href="#6-2-1-HTTP-首部字段传递重要信息" class="headerlink" title="6.2.1 HTTP 首部字段传递重要信息"></a>6.2.1 HTTP 首部字段传递重要信息</h4><p>HTTP 首部字段是构成 HTTP 报文的要素之一。在客户端与服务器之间以 HTTP 协议进行通信的过程中，无论是请求还是响应都会使用首部字段，它能起到<strong>传递额外重要信息</strong>的作用。</p>
<p>使用首部字段是为了给浏览器和服务器提供<strong>报文主体大小、所使用的语言、认证信息</strong>等内容。</p>
<h4 id="6-2-2-HTTP-首部字段结构"><a href="#6-2-2-HTTP-首部字段结构" class="headerlink" title="6.2.2 HTTP 首部字段结构"></a>6.2.2 HTTP 首部字段结构</h4><ul>
<li><p><code>首部字段名: 字段值</code></p>
</li>
<li><p>字段值对应单个 HTTP 首部字段可以有多个值</p>
</li>
</ul>
<pre><code class="lang-http">Content-Type: text/html
Keep-Alive: timeout=15, max=100
</code></pre>
<h4 id="6-2-3-4-种-HTTP-首部字段类型"><a href="#6-2-3-4-种-HTTP-首部字段类型" class="headerlink" title="6.2.3 4 种 HTTP 首部字段类型"></a>6.2.3 4 种 HTTP 首部字段类型</h4><p>HTTP 首部字段根据<strong>实际用途</strong>被分为以下 4 种类型。</p>
<ul>
<li><strong>通用首部字段（General Header Fields）</strong></li>
</ul>
<blockquote>
<p>请求报文和响应报文<strong>两方都会使用的首部</strong>。</p>
</blockquote>
<ul>
<li><strong>请求首部字段（Request Header Fields）</strong></li>
</ul>
<blockquote>
<p>从客户端向服务器端<strong>发送请求报文时使用的首部</strong>。补充了<strong>请求的附加内容、客户端信息、响应内容相关优先级</strong>等信息。</p>
</blockquote>
<ul>
<li><strong>响应首部字段（Response Header Fields）</strong></li>
</ul>
<blockquote>
<p>从服务器端向客户端<strong>返回响应报文时使用的首部</strong>。补充了<strong>响应的附加内容</strong>，也会<strong>要求客户端附加额外的内容信息</strong>。</p>
</blockquote>
<ul>
<li><strong>实体首部字段（Entity Header Fields）</strong></li>
</ul>
<blockquote>
<p>针对请求报文和响应报文的实体部分使用的首部。补充了<strong>资源内容更新时间等与实体有关的信息</strong>。</p>
</blockquote>
<h4 id="6-2-4-HTTP-1-1-首部字段一览"><a href="#6-2-4-HTTP-1-1-首部字段一览" class="headerlink" title="6.2.4 HTTP/1.1 首部字段一览"></a>6.2.4 HTTP/1.1 首部字段一览</h4><p>HTTP/1.1 规范定义了如下 47 种首部字段。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737859012.jpg" alt="通用首部字段" title>
                </div>
                <div class="image-caption">通用首部字段</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737859222.jpg" alt="请求首部字段" title>
                </div>
                <div class="image-caption">请求首部字段</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737859351.jpg" alt="响应首部字段" title>
                </div>
                <div class="image-caption">响应首部字段</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737859434.jpg" alt="实体首部字段" title>
                </div>
                <div class="image-caption">实体首部字段</div>
            </figure>
<h4 id="6-2-5-非-HTTP-1-1-首部字段"><a href="#6-2-5-非-HTTP-1-1-首部字段" class="headerlink" title="6.2.5 非 HTTP/1.1 首部字段"></a>6.2.5 非 HTTP/1.1 首部字段</h4><p>在 HTTP 协议通信交互中使用到的首部字段，不限于 RFC2616 中定义的 47 种首部字段。还有<strong>Cookie、Set-Cookie、Content-Disposition</strong>等在其他 RFC 中定义的首部字段，它们的使用频率也很高。</p>
<p>这些非正式的首部字段统一归纳在<strong>RFC4229 HTTP Header Field Registrations</strong>中。</p>
<h4 id="6-2-6-End-to-end-首部和-Hop-by-hop-首部"><a href="#6-2-6-End-to-end-首部和-Hop-by-hop-首部" class="headerlink" title="6.2.6 End-to-end 首部和 Hop-by-hop 首部"></a>6.2.6 End-to-end 首部和 Hop-by-hop 首部</h4><p>HTTP 首部字段将定义成<strong>缓存代理</strong>和<strong>非缓存代理</strong>的行为，分成 2 种类型。</p>
<p><strong>端到端首部（End-to-end Header）</strong></p>
<p>分在此类别中的首部会转发给请求 / 响应对应的最终接收目标，且<strong>必须保存在由缓存生成的响应中</strong>，另外规定它<strong>必须被转发</strong>。</p>
<p><strong>逐跳首部（Hop-by-hop Header）</strong></p>
<p>分在此类别中的首部<strong>只对单次转发有效</strong>，会因通过缓存或代理而不再转发。HTTP/1.1 和之后版本中，如果要使用 hop-by-hop 首部，需提供<code>Connection</code>首部字段。</p>
<p>下面列举了 HTTP/1.1 中的逐跳首部字段。除这 8 个首部字段之外，其他所有字段都属于端到端首部。</p>
<ul>
<li>Keep-Alive</li>
<li>Proxy-Authenticate</li>
<li>Proxy-Authorization</li>
<li>Trailer</li>
<li>TE</li>
<li>Transfer-Encoding</li>
<li>Upgrade</li>
</ul>
<h3 id="6-3-HTTP-1-1-通用首部字段"><a href="#6-3-HTTP-1-1-通用首部字段" class="headerlink" title="6.3 HTTP/1.1 通用首部字段"></a>6.3 HTTP/1.1 通用首部字段</h3><p>通用首部字段是指，<strong>请求报文和响应报文双方都会使用的首部</strong>。</p>
<h4 id="6-3-1-Cache-Control"><a href="#6-3-1-Cache-Control" class="headerlink" title="6.3.1 Cache-Control"></a>6.3.1 Cache-Control</h4><p>通过指定首部字段<code>Cache-Control</code>的指令，就能操作缓存的工作机制。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199889048.jpg" alt="首部字段Cache-Control能够控制缓存的行为" title>
                </div>
                <div class="image-caption">首部字段Cache-Control能够控制缓存的行为</div>
            </figure>
<p>指令的参数是可选的，多个指令之间通过<code>,</code>分隔。首部字段<code>Cache-Control</code>的指令可用于请求及响应时。</p>
<p><strong>Cache-Control 指令一览</strong></p>
<p>可用的指令按请求和响应分类如下所示。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737860349.jpg" alt="缓存请求指令" title>
                </div>
                <div class="image-caption">缓存请求指令</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737870852.jpg" alt="缓存响应指令" title>
                </div>
                <div class="image-caption">缓存响应指令</div>
            </figure>
<p><strong>表示是否能缓存的指令</strong></p>
<ul>
<li>public 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: public
</code></pre>
<p>当指定使用<code>public</code>指令时，则明确表明其他用户也可利用缓存。</p>
<ul>
<li>private 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: private
</code></pre>
<p>当指定<code>private</code>指令后，响应只以特定的用户作为对象，这与<code>public</code>指令的行为相反。</p>
<p>缓存服务器会<strong>对该特定用户提供资源缓存的服务</strong>，对于其他用户发送过来的请求，代理服务器则不会返回缓存。</p>
<p><strong>no-cache 指令</strong></p>
<pre><code class="lang-http">Cache-Control: no-cache
</code></pre>
<p>使用<code>no-cache</code>指令的目的是为了<strong>防止从缓存中返回过期的资源</strong>。</p>
<p>客户端发送的请求中如果包含<code>no-cache</code>指令，则表示客户端将不会接收缓存过的响应。于是，“中间”的缓存服务器必须把客户端请求转发给源服务器。</p>
<p>如果服务器返回的响应中包含<code>no-cache</code>指令，那么缓存服务器不能对资源进行缓存。源服务器以后也将不再对缓存服务器请求中提出的资源有效性进行确认，且禁止其对响应资源进行缓存操作。</p>
<pre><code class="lang-http">Cache-Control: no-cache=Location
</code></pre>
<blockquote>
<p>由服务器返回的响应中，若报文首部字段<code>Cache-Control</code>中对<code>no-cache</code>字段名具体指定参数值，那么客户端在接收到这个被指定参数值的首部字段对应的响应报文后，就不能使用缓存。</p>
</blockquote>
<p><strong>控制可执行缓存的对象的指令</strong></p>
<ul>
<li>no-store指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: no-store
</code></pre>
<p>当使用<code>no-store</code>指令  时，暗示请求（和对应的响应）或响应中包含机密信息。因此，该指令规定<strong>缓存不能在本地存储请求或响应的任一部分</strong>。</p>
<p><strong>指定缓存期限和认证的指令</strong></p>
<ul>
<li>s-maxage 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: s-maxage=604800（单位 ：秒）
</code></pre>
<p><code>s-maxage</code>指令的功能和<code>max-age</code>指令的相同，它们的不同点是<strong><code>s-maxage</code>指令只适用于供多位用户使用的公共缓存服务器</strong>（一般指代理服务器）。也就是说，对于向同一用户重复返回响应的服务器来说，这个指令没有任何作用。</p>
<p>另外，当使用<code>s-maxage</code>指令后，则直接忽略对<code>Expires</code>首部字段及<code>max-age</code>指令的处理。</p>
<ul>
<li>max-age 指令</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199889880.jpg" alt="max-age指令" title>
                </div>
                <div class="image-caption">max-age指令</div>
            </figure>
<pre><code class="lang-http">Cache-Control: max-age=604800（单位：秒）
</code></pre>
<p>当客户端发送的请求中包含<code>max-age</code>指令时，如果判定缓存资源的缓存时间数值比指定时间的数值更小，那么客户端就接收缓存的资源。另外，当指定<code>max-age</code>值为 0，那么缓存服务器通常需要将请求转发给源服务器。</p>
<p>当服务器返回的响应中包含<code>max-age</code>指令时，缓存服务器将不对资源的有效性再作确认，而<strong><code>max-age</code>数值代表资源保存为缓存的最长时间</strong>。</p>
<blockquote>
<p> 应用 HTTP/1.1 版本的缓存服务器遇到同时存在<code>Expires</code>首部字段的情况时，会优先处理<code>max-age</code>指令，而忽略掉<code>Expires</code>首部字段。而 HTTP/1.0 版本的缓存服务器的情况却相反，<code>max-age</code>指令会被忽略掉。</p>
</blockquote>
<ul>
<li>min-fresh 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: min-fresh=60（单位：秒）
</code></pre>
<p><code>min-fresh</code>指令要求缓存服务器返回至少还未过指定时间的缓存资源。比如，当指定<code>min-fresh</code>为 60 秒后，过了 60 秒的资源都无法作为响应返回了。</p>
<ul>
<li>max-stale 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: max-stale=3600（单位：秒）
</code></pre>
<p>使用<code>max-stale</code>可指示缓存资源，即使过期也照常接收。</p>
<ul>
<li>only-if-cached 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: only-if-cached
</code></pre>
<p>使用<code>only-if-cached</code>指令表示客户端仅在缓存服务器本地缓存目标资源的情况下才会要求其返回。换言之，该指令<strong>要求缓存服务器不重新加载响应，也不会再次确认资源有效性</strong>。若发生请求缓存服务器的本地缓存无响应，则返回状态码<code>504 Gateway Timeout</code>。</p>
<ul>
<li>must-revalidate 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: must-revalidate
</code></pre>
<p>使用<code>must-revalidate</code>指令，代理会向源服务器再次验证即将返回的响应缓存目前是否仍然有效。</p>
<p>若代理无法连通源服务器再次获取有效资源的话，缓存必须给客户端一条 504（Gateway Timeout）状态码。</p>
<blockquote>
<p>另外，使用<code>must-revalidate</code>指令会忽略请求的<code>max-stale</code>指令（即使已经在首部使用了<code>max-stale</code>，也不会再有效果）。</p>
</blockquote>
<ul>
<li>proxy-revalidate 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: proxy-revalidate
</code></pre>
<p><code>proxy-revalidate</code>指令要求所有的缓存服务器在接收到客户端带有该指令的请求返回响应之前，必须<strong>再次验证缓存的有效性</strong>。</p>
<ul>
<li>no-transform 指令</li>
</ul>
<pre><code class="lang-http">Cache-Control: no-transform
</code></pre>
<p>使用<code>no-transform</code>指令规定无论是在请求还是响应中，<strong>缓存都不能改变实体主体的媒体类型</strong>。这样做可<strong>防止缓存或代理压缩图片</strong>等类似操作。</p>
<h4 id="6-3-2-Connection"><a href="#6-3-2-Connection" class="headerlink" title="6.3.2 Connection"></a>6.3.2 Connection</h4><p><code>Connection</code>首部字段具备如下两个作用：</p>
<ul>
<li>控制不再转发给代理的首部字段</li>
</ul>
<pre><code class="lang-http">Connection: 不再转发的首部字段名
</code></pre>
<ul>
<li>管理持久连接</li>
</ul>
<pre><code class="lang-http">Connection: close
</code></pre>
<blockquote>
<p>HTTP/1.1 版本的默认连接都是持久连接。为此，客户端会在持久连接上连续发送请求。当服务器端想明确断开连接时，则指定<code>Connection</code>首部字段的值为<code>Close</code>。</p>
</blockquote>
<pre><code class="lang-http">Connection: Keep-Alive
</code></pre>
<blockquote>
<p>HTTP/1.1 之前的 HTTP 版本的默认连接都是非持久连接。为此，如果想在旧版本的 HTTP 协议上维持持续连接，则需要指定<code>Connection</code>首部字段的值为<code>Keep-Alive</code>。</p>
</blockquote>
<h4 id="6-3-3-Date"><a href="#6-3-3-Date" class="headerlink" title="6.3.3 Date"></a>6.3.3 Date</h4><p>首部字段<code>Date</code>表明创建 HTTP 报文的日期和时间。</p>
<p><strong>HTTP/1.1</strong> 协议使用在 <strong>RFC1123</strong> 中规定的日期时间的格式，如下示例：</p>
<pre><code class="lang-http">Date: Tue, 03 Jul 2012 04:40:59 GMT
</code></pre>
<p>之前的 HTTP 协议版本中使用在 <strong>RFC850</strong> 中定义的格式，如下所示：</p>
<pre><code class="lang-http">Date: Tue, 03-Jul-12 04:40:59 GMT
</code></pre>
<p>除此之外，还有一种格式。它与 C 标准库内的 <code>asctime()</code> 函数的输出格式一致：</p>
<pre><code class="lang-http">Date: Tue Jul 03 04:40:59 2012
</code></pre>
<h4 id="6-3-4-Pragma"><a href="#6-3-4-Pragma" class="headerlink" title="6.3.4 Pragma"></a>6.3.4 Pragma</h4><p>Pragma 是 HTTP/1.1 之前版本的<strong>历史遗留字段</strong>，仅作为与 HTTP/1.0 的向后兼容而定义。</p>
<pre><code class="lang-http">Pragma: no-cache
</code></pre>
<blockquote>
<p>所有的中间服务器如果都能以 HTTP/1.1 为基准，那直接采用<code>Cache-Control: no-cache</code>指定缓存的处理方式是最为理想的。但要整体掌握全部中间服务器使用的 HTTP 协议版本却是不现实的。因此，发送的请求会同时含有下面两个首部字段。</p>
</blockquote>
<pre><code class="lang-http">Cache-Control: no-cache
Pragma: no-cache
</code></pre>
<h4 id="6-3-5-Trailer"><a href="#6-3-5-Trailer" class="headerlink" title="6.3.5 Trailer"></a>6.3.5 Trailer</h4><p>首部字段<code>Trailer</code>会事先说明<strong>在报文主体后记录了哪些首部字段</strong>。该首部字段可应用在 HTTP/1.1 版本分块传输编码时。</p>
<pre><code class="lang-http">HTTP/1.1 200 OK
Date: Tue, 03 Jul 2012 04:40:56 GMT
Content-Type: text/html
...
Transfer-Encoding: chunked
Trailer: Expires

...(报文主体)...
0
Expires: Tue, 28 Sep 2004 23:59:59 GMT
</code></pre>
<p>以上用例中，指定首部字段<code>Trailer</code>的值为<code>Expires</code>，在报文主体之后（分块长度 0 之后）出现了首部字段<code>Expires</code>。</p>
<h4 id="6-3-6-Transfer-Encoding"><a href="#6-3-6-Transfer-Encoding" class="headerlink" title="6.3.6 Transfer-Encoding"></a>6.3.6 Transfer-Encoding</h4><p>首部字段<code>Transfer-Encoding</code>规定了<strong>传输报文主体时采用的编码方式</strong>。HTTP/1.1 的传输编码方式<strong>仅对分块传输编码</strong>有效。</p>
<pre><code class="lang-http">HTTP/1.1 200 OK
Date: Tue, 03 Jul 2012 04:40:56 GMT
Cache-Control: public, max-age=604800
Content-Type: text/javascript; charset=utf-8
Expires: Tue, 10 Jul 2012 04:40:56 GMT
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Content-Encoding: gzip
Transfer-Encoding: chunked
Connection: keep-alive

cf0    ←16进制(10进制为3312)

...3312字节分块数据...

392    ←16进制(10进制为914)

...914字节分块数据...

0
</code></pre>
<blockquote>
<p> 以上用例中，正如在首部字段<code>Transfer-Encoding</code>中指定的那样，有效使用分块传输编码，且分别被分成 3312 字节和 914 字节大小的分块数据。</p>
</blockquote>
<h4 id="6-3-7-Upgrade"><a href="#6-3-7-Upgrade" class="headerlink" title="6.3.7 Upgrade"></a>6.3.7 Upgrade</h4><p>首部字段<code>Upgrade</code>用于<strong>检测 HTTP 协议及其他协议是否可使用更高的版本进行通信</strong>，其参数值可以用来指定一个完全不同的通信协议。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199892826.jpg" alt="首部字段Upgrade" title>
                </div>
                <div class="image-caption">首部字段Upgrade</div>
            </figure>
<p>上图用例中，首部字段<code>Upgrade</code>指定的值为<code>TLS/1.0</code>。请注意此处两个字段首部字段的对应关系，<code>Connection</code>的值被指定为<code>Upgrade</code>。<code>Upgrade</code>首部字段产生作用的<code>Upgrade</code>对象仅限于客户端和邻接服务器之间。因此，使用首部字段<code>Upgrade</code>时，还需要额外指定<code>Connection:Upgrade</code>。</p>
<blockquote>
<p>对于附有首部字段<code>Upgrade</code>的请求，服务器可用<code>101 Switching Protocols</code>状态码作为响应返回。</p>
</blockquote>
<h4 id="6-3-8-Via"><a href="#6-3-8-Via" class="headerlink" title="6.3.8 Via"></a>6.3.8 Via</h4><p>使用首部字段<code>Via</code>是为了追踪客户端与服务器之间的请求和响应报文的传输路径。</p>
<p>首部字段<code>Via</code>不仅用于<strong>追踪报文的转发</strong>，还可<strong>避免请求回环的发生</strong>。所以必须在经过代理时附加该首部字段内容。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199893394.jpg" alt="报文经过代理时会被添加Via字段" title>
                </div>
                <div class="image-caption">报文经过代理时会被添加Via字段</div>
            </figure>
<h4 id="6-3-9-Warning"><a href="#6-3-9-Warning" class="headerlink" title="6.3.9 Warning"></a>6.3.9 Warning</h4><p>HTTP/1.1 的<code>Warning</code>首部是从 HTTP/1.0 的响应首部<code>Retry-After</code>演变过来的。该首部通常会告知用户一些与缓存相关的问题的警告。</p>
<pre><code class="lang-http">Warning: 113 gw.hackr.jp:8080 &quot;Heuristic expiration&quot; Tue, 03 Jul 2012 05:09:44 GMT
</code></pre>
<p><code>Warning</code>首部的格式如下。最后的日期时间部分可省略。</p>
<pre><code class="lang-http">Warning: [警告码][警告的主机:端口号]“[警告内容]”([日期时间])
</code></pre>
<p>HTTP/1.1 中定义了 7 种警告。警告码对应的警告内容仅推荐参考。另外，警告码具备扩展性，今后有可能追加新的警告码。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/737880511.jpg" alt="HTTP/1.1警告码" title>
                </div>
                <div class="image-caption">HTTP/1.1警告码</div>
            </figure>
<h3 id="6-4-请求首部字段"><a href="#6-4-请求首部字段" class="headerlink" title="6.4 请求首部字段"></a>6.4 请求首部字段</h3><p>请求首部字段是从客户端往服务器端发送<strong>请求报文中所使用的字段</strong>，用于补充请求的<strong>附加信息、客户端信息、对响应内容相关的优先级</strong>等内容。</p>
<h4 id="6-4-1-Accept"><a href="#6-4-1-Accept" class="headerlink" title="6.4.1 Accept"></a>6.4.1 Accept</h4><pre><code class="lang-http">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
</code></pre>
<p><code>Accept</code>首部字段可通知服务器，用户代理<strong>能够处理的媒体类型及媒体类型的相对优先级</strong>。可使用<code>type/subtype</code>这种形式，一次指定多种媒体类型。</p>
<blockquote>
<p>当服务器提供多种内容时，将会<strong>首先返回权重值最高</strong>的媒体类型。</p>
</blockquote>
<h4 id="6-4-2-Accept-Charset"><a href="#6-4-2-Accept-Charset" class="headerlink" title="6.4.2 Accept-Charset"></a>6.4.2 Accept-Charset</h4><pre><code class="lang-http">Accept-Charset: iso-8859-5, unicode-1-1;q=0.8
</code></pre>
<p><code>Accept-Charset</code>首部字段可用来通知服务器用户代理支持的字符集及字符集的相对优先顺序。另外，可一次性指定多种字符集。与首部字段<code>Accept</code>相同的是<strong>可用权重<code>q</code>值来表示相对优先级</strong>。</p>
<h4 id="6-4-3-Accept-Encoding"><a href="#6-4-3-Accept-Encoding" class="headerlink" title="6.4.3 Accept-Encoding"></a>6.4.3 Accept-Encoding</h4><pre><code class="lang-http">Accept-Encoding: gzip, deflate
</code></pre>
<p><code>Accept-Encoding</code>首部字段用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序。可一次性指定多种内容编码。</p>
<ul>
<li><strong>gzip</strong>：由文件压缩程序 gzip（GNU zip）生成的编码格式（RFC1952）</li>
<li><strong>compress</strong>：由 UNIX 文件压缩程序 compress 生成的编码格式</li>
<li><strong>deflate</strong>：组合使用 zlib 格式（RFC1950）及由 deflate 压缩算法（RFC1951）生成的编码格式</li>
<li><strong>identity</strong>：不执行压缩或不会变化的默认编码格式</li>
</ul>
<h4 id="6-4-4-Accept-Language"><a href="#6-4-4-Accept-Language" class="headerlink" title="6.4.4 Accept-Language"></a>6.4.4 Accept-Language</h4><pre><code class="lang-http">Accept-Language: zh-cn,zh;q=0.7,en-us,en;q=0.3
</code></pre>
<h4 id="6-4-5-Authorization"><a href="#6-4-5-Authorization" class="headerlink" title="6.4.5 Authorization"></a>6.4.5 Authorization</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199895450.jpg" alt="首部字段Authorization" title>
                </div>
                <div class="image-caption">首部字段Authorization</div>
            </figure>
<pre><code class="lang-http">Authorization: Basic dWVub3NlbjpwYXNzd29yZA==
</code></pre>
<p>首部字段<code>Authorization</code>是用来告知服务器，<strong>用户代理的认证信息</strong>（证书值）。</p>
<h4 id="6-4-6-Expect"><a href="#6-4-6-Expect" class="headerlink" title="6.4.6 Expect"></a>6.4.6 Expect</h4><pre><code class="lang-http">Expect: 100-continue
</code></pre>
<p>客户端使用首部字段<code>Expect</code>来告知服务器，期望出现的某种特定行为。因服务器无法理解客户端的期望作出回应而发生错误时，会返回状态码<code>417 Expectation Failed</code>。</p>
<h4 id="6-4-7-From"><a href="#6-4-7-From" class="headerlink" title="6.4.7 From"></a>6.4.7 From</h4><p>首部字段<code>From</code>用来告知服务器使用用户代理的用户的电子邮件地址。通常，其使用目的就是为了<strong>显示搜索引擎等用户代理的负责人的电子邮件联系方式</strong>。</p>
<h4 id="6-4-8-Host"><a href="#6-4-8-Host" class="headerlink" title="6.4.8 Host"></a>6.4.8 Host</h4><pre><code class="lang-http">Host: www.hackr.jp
</code></pre>
<p>首部字段<code>Host</code>会告知服务器，请求的资源所处的<strong>互联网主机名</strong>和<strong>端口号</strong>。<code>Host</code> 首部字段在 HTTP/1.1 规范内是<strong>唯一一个必须被包含在请求内的首部字段</strong>。</p>
<blockquote>
<p>首部字段<code>Host</code>和<strong>以单台服务器分配多个域名</strong>的虚拟主机的工作机制有很密切的关联，这是其必须存在的意义。</p>
</blockquote>
<p>若服务器未设定主机名，那直接发送一个空值即可。如下所示。</p>
<pre><code class="lang-http">Host:
</code></pre>
<h4 id="6-4-9-If-Match"><a href="#6-4-9-If-Match" class="headerlink" title="6.4.9 If-Match"></a>6.4.9 If-Match</h4><p>形如<code>If-xxx</code>这种样式的请求首部字段，都可称为<strong>条件请求</strong>。服务器接收到附带条件的请求后，只有判断指定条件为真时，才会执行请求。</p>
<pre><code class="lang-http">If-Match: &quot;123456&quot;
</code></pre>
<p>服务器会比对<code>If-Match</code>的字段值和资源的 <strong>ETag</strong> 值，仅当两者一致时，才会执行请求。反之，则返回状态码<code>412 Precondition Failed</code>的响应。</p>
<h4 id="6-4-10-If-Modified-Since"><a href="#6-4-10-If-Modified-Since" class="headerlink" title="6.4.10 If-Modified-Since"></a>6.4.10 If-Modified-Since</h4><pre><code class="lang-http">If-Modified-Since: Thu, 15 Apr 2004 00:00:00 GMT
</code></pre>
<p><code>If-Modified-Since</code>用于<strong>确认代理或客户端拥有的本地资源的有效性</strong>。获取资源的更新日期时间，可通过确认首部字段<code>Last-Modified</code>来确定。</p>
<h4 id="6-4-11-If-None-Match"><a href="#6-4-11-If-None-Match" class="headerlink" title="6.4.11 If-None-Match"></a>6.4.11 If-None-Match</h4><p>首部字段<code>If-None-Match</code>属于附带条件之一。它和首部字段<code>If-Match</code>作用相反。用于指定<code>If-None-Match</code>字段值的实体标记（ETag）值与请求资源的 ETag 不一致时，它就告知服务器处理该请求。</p>
<blockquote>
<p>在 GET 或 HEAD 方法中使用首部字段<code>If-None-Match</code>可获取最新的资源。因此，这与使用首部字段<code>If-Modified-Since</code>时有些类似。</p>
</blockquote>
<h4 id="6-4-12-If-Range"><a href="#6-4-12-If-Range" class="headerlink" title="6.4.12 If-Range"></a>6.4.12 If-Range</h4><p>首部字段<code>If-Range</code>属于附带条件之一。它告知服务器若指定的<code>If-Range</code>字段值（ETag 值或者时间）和请求资源的 ETag 值或时间相一致时，则作为范围请求处理。反之，则返回全体资源。</p>
<h4 id="6-4-13-If-Unmodified-Since"><a href="#6-4-13-If-Unmodified-Since" class="headerlink" title="6.4.13 If-Unmodified-Since"></a>6.4.13 If-Unmodified-Since</h4><pre><code class="lang-http">If-Unmodified-Since: Thu, 03 Jul 2012 00:00:00 GMT
</code></pre>
<p>首部字段<code>If-Unmodified-Since</code>和首部字段<code>If-Modified-Since</code>的作用相反。它的作用的是告知服务器，指定的请求资源<strong>只有在字段值内指定的日期时间之后，未发生更新的情况下，才能处理请求</strong>。如果在指定日期时间后发生了更新，则以状态码<code>412 Precondition Failed</code>作为响应返回。</p>
<h4 id="6-4-14-Max-Forwards"><a href="#6-4-14-Max-Forwards" class="headerlink" title="6.4.14 Max-Forwards"></a>6.4.14 Max-Forwards</h4><pre><code class="lang-http">Max-Forwards: 10
</code></pre>
<p>通过 TRACE 方法或 OPTIONS 方法，发送包含首部字段<code>Max-Forwards</code>的请求时，该字段以十进制整数形式指定<strong>可经过的服务器最大数目</strong>。</p>
<h4 id="6-4-15-Proxy-Authorization"><a href="#6-4-15-Proxy-Authorization" class="headerlink" title="6.4.15 Proxy-Authorization"></a>6.4.15 Proxy-Authorization</h4><pre><code class="lang-http">Proxy-Authorization: Basic dGlwOjkpNLAGfFY5
</code></pre>
<p>接收到从代理服务器发来的认证质询时，客户端会发送包含首部字段<code>Proxy-Authorization</code>的请求，以<strong>告知服务器认证所需要的信息</strong>。</p>
<h4 id="6-4-16-Range"><a href="#6-4-16-Range" class="headerlink" title="6.4.16 Range"></a>6.4.16 Range</h4><pre><code class="lang-http">Range: bytes=5001-10000
</code></pre>
<p>对于只需获取部分资源的范围请求，包含首部字段<code>Range</code>即可<strong>告知服务器资源的指定范围</strong>。上面的示例表示请求获取从第 5001 字节至第 10000 字节的资源。</p>
<h4 id="6-4-17-Referer"><a href="#6-4-17-Referer" class="headerlink" title="6.4.17 Referer"></a>6.4.17 Referer</h4><pre><code class="lang-http">Referer: http://www.hackr.jp/index.htm
</code></pre>
<p>首部字段<code>Referer</code>会告知服务器请求的原始资源的 URI。</p>
<p>客户端一般都会发送<code>Referer</code>首部字段给服务器。但当直接在浏览器的地址栏输入 URI，或出于安全性的考虑时，也可以不发送该首部字段。</p>
<blockquote>
<p>因为原始资源的 URI 中的查询字符串可能含有 ID 和密码等保密信息，要是写进 Referer 转发给其他服务器，则有可能导致保密信息的泄露。</p>
</blockquote>
<h4 id="6-4-18-TE"><a href="#6-4-18-TE" class="headerlink" title="6.4.18 TE"></a>6.4.18 TE</h4><pre><code class="lang-http">TE: gzip, deflate;q=0.5
</code></pre>
<p>首部字段<code>TE</code>会告知服务器<strong>客户端能够处理响应的传输编码方式及相对优先级</strong>。它和首部字段<code>Accept-Encoding</code>的功能很相像，但是用于<strong>传输编码</strong>。</p>
<h4 id="6-4-19-User-Agent"><a href="#6-4-19-User-Agent" class="headerlink" title="6.4.19 User-Agent"></a>6.4.19 User-Agent</h4><pre><code class="lang-http">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
</code></pre>
<p>首部字段<code>User-Agent</code>会将<strong>创建请求的浏览器和用户代理名称</strong>等信息传达给服务器。</p>
<h3 id="6-5-响应首部字段"><a href="#6-5-响应首部字段" class="headerlink" title="6.5 响应首部字段"></a>6.5 响应首部字段</h3><p>响应首部字段是由服务器端向客户端返回<strong>响应报文中所使用的字段</strong>，用于补充响应的<strong>附加信息、服务器信息，以及对客户端的附加要求</strong>等信息。</p>
<h4 id="6-5-1-Accept-Ranges"><a href="#6-5-1-Accept-Ranges" class="headerlink" title="6.5.1 Accept-Ranges"></a>6.5.1 Accept-Ranges</h4><pre><code class="lang-http">Accept-Ranges: bytes
</code></pre>
<p>首部字段<code>Accept-Ranges</code>是用来<strong>告知客户端服务器是否能处理范围请求</strong>，以指定获取服务器端某个部分的资源。</p>
<p>可指定的字段值有两种，可处理范围请求时指定其为<code>bytes</code>，反之则指定其为<code>none</code>。</p>
<h4 id="6-5-2-Age"><a href="#6-5-2-Age" class="headerlink" title="6.5.2 Age"></a>6.5.2 Age</h4><pre><code class="lang-http">Age: 600
</code></pre>
<p>首部字段<code>Age</code>能告知客户端，<strong>源服务器在多久前创建了响应</strong>。字段值的<strong>单位为秒</strong>。</p>
<p>若创建该响应的服务器是<strong>缓存服务器</strong>，<code>Age</code>值是指<strong>缓存后的响应再次发起认证到认证完成的时间值</strong>。</p>
<p>代理创建响应时必须加上首部字段<code>Age</code>。</p>
<h4 id="6-5-3-ETag"><a href="#6-5-3-ETag" class="headerlink" title="6.5.3 ETag"></a>6.5.3 ETag</h4><pre><code class="lang-http">ETag: &quot;82e22293907ce725faf67773957acd12&quot;
</code></pre>
<p>首部字段 ETag 能告知客户端实体标识。它是一种<strong>可将资源以字符串形式做唯一性标识的方式</strong>。服务器会为每份资源分配对应的 ETag 值。</p>
<p>另外，<strong>当资源更新时，ETag 值也需要更新</strong>。生成 ETag 值时，<strong>并没有统一的算法规则</strong>，而仅仅是<strong>由服务器来分配</strong>。</p>
<p><strong>强 ETag 值和弱 ETag 值</strong></p>
<ul>
<li><strong>强 ETag 值</strong>，不论实体发生多么细微的变化都会改变其值</li>
</ul>
<pre><code class="lang-http">ETag: &quot;usagi-1234&quot;
</code></pre>
<ul>
<li><strong>弱 ETag 值</strong>只用于<strong>提示资源是否相同</strong>。只有资源发生了根本改变，产生差异时才会改变 ETag 值。这时，会在字段值最开始处附加<code>W/</code></li>
</ul>
<pre><code class="lang-http">ETag: W/&quot;usagi-1234&quot;
</code></pre>
<h4 id="6-5-4-Location"><a href="#6-5-4-Location" class="headerlink" title="6.5.4 Location"></a>6.5.4 Location</h4><pre><code class="lang-http">Location: http://www.usagidesign.jp/sample.html
</code></pre>
<p>使用首部字段<code>Location</code>可以<strong>将响应接收方引导至某个与请求 URI 位置不同的资源</strong>。</p>
<p>基本上，该字段会配合<code>3xx ：Redirection</code>的响应，提供<strong>重定向</strong>的 URI。</p>
<h4 id="6-5-5-Proxy-Authenticate"><a href="#6-5-5-Proxy-Authenticate" class="headerlink" title="6.5.5 Proxy-Authenticate"></a>6.5.5 Proxy-Authenticate</h4><pre><code class="lang-http">Proxy-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
</code></pre>
<p>首部字段<code>Proxy-Authenticate</code>会把由代理服务器所要求的<strong>认证信息</strong>发送给客户端。</p>
<h4 id="6-5-6-Retry-After"><a href="#6-5-6-Retry-After" class="headerlink" title="6.5.6 Retry-After"></a>6.5.6 Retry-After</h4><pre><code class="lang-http">Retry-After: 120
</code></pre>
<p>首部字段<code>Retry-After</code>告知客户端<strong>应该在多久之后再次发送请求</strong>。主要配合状态码<code>503 Service Unavailable</code>响应，或<code>3xx Redirect</code>响应一起使用。</p>
<blockquote>
<p>字段值可以指定为<strong>具体的日期时间</strong>（Wed, 04 Jul 2012 06：34：24 GMT 等格式），也可以是<strong>创建响应后的秒数</strong>。</p>
</blockquote>
<h4 id="6-5-7-Server"><a href="#6-5-7-Server" class="headerlink" title="6.5.7 Server"></a>6.5.7 Server</h4><pre><code class="lang-http">Server: Apache/2.2.17 (Unix)
</code></pre>
<p>首部字段<code>Server</code>告知客户端<strong>当前服务器上安装的 HTTP 服务器应用程序的信息</strong>。不单单会标出服务器上的软件应用名称，还有可能包括版本号和安装时启用的可选项。</p>
<pre><code class="lang-http">Server: Apache/2.2.6 (Unix) PHP/5.2.5
</code></pre>
<h4 id="6-5-8-Vary"><a href="#6-5-8-Vary" class="headerlink" title="6.5.8 Vary"></a>6.5.8 Vary</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/22/http-notes-part-3/199902411.jpg" alt="响应首部字段Vary" title>
                </div>
                <div class="image-caption">响应首部字段Vary</div>
            </figure>
<pre><code class="lang-http">Vary: Accept-Language
</code></pre>
<p>首部字段<code>Vary</code>可对缓存进行控制。源服务器会向代理服务器传达<strong>关于本地缓存使用方法</strong>的命令。</p>
<blockquote>
<p>从代理服务器接收到源服务器返回包含<code>Vary</code>指定项的响应之后，若再要进行缓存，<strong>仅对请求中含有相同<code>Vary</code>指定首部字段的请求返回缓存</strong>。即使对相同资源发起请求，但由于<code>Vary</code>指定的首部字段不相同，因此必须要从源服务器重新获取资源。</p>
</blockquote>
<h4 id="6-5-9-WWW-Authenticate"><a href="#6-5-9-WWW-Authenticate" class="headerlink" title="6.5.9 WWW-Authenticate"></a>6.5.9 WWW-Authenticate</h4><pre><code class="lang-http">WWW-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
</code></pre>
<p>首部字段<code>WWW-Authenticate</code>用于 HTTP 访问认证。它会<strong>告知客户端适用于访问请求 URI 所指定资源的认证方案</strong>（Basic 或是 Digest）和<strong>带参数提示的质询</strong>（challenge）。状态码<code>401 Unauthorized</code>响应中，肯定带有首部字段<code>WWW-Authenticate</code>。</p>
<h3 id="6-6-实体首部字段"><a href="#6-6-实体首部字段" class="headerlink" title="6.6 实体首部字段"></a>6.6 实体首部字段</h3><p><strong>实体首部字段</strong>是包含在请求报文和响应报文中的<strong>实体部分所使用的首部</strong>，用于<strong>补充</strong>内容的更新时间等<strong>与实体相关的信息</strong>。</p>
<h4 id="6-6-1-Allow"><a href="#6-6-1-Allow" class="headerlink" title="6.6.1 Allow"></a>6.6.1 Allow</h4><pre><code class="lang-http">Allow: GET, HEAD
</code></pre>
<p>首部字段<code>Allow</code>用于通知客户端能够支持 Request-URI 指定资源的所有 HTTP 方法。</p>
<p>当服务器接收到不支持的 HTTP 方法时，会以状态码<code>405 Method Not Allowed</code>作为响应返回。与此同时，还会<strong>把所有能支持的 HTTP 方法写入首部字段<code>Allow</code>后返回</strong>。</p>
<h4 id="6-6-2-Content-Encoding"><a href="#6-6-2-Content-Encoding" class="headerlink" title="6.6.2 Content-Encoding"></a>6.6.2 Content-Encoding</h4><pre><code class="lang-http">Content-Encoding: gzip
</code></pre>
<p>首部字段<code>Content-Encoding</code>会告知客户端<strong>服务器对实体的主体部分选用的内容编码方式</strong>。内容编码是指在不丢失实体信息的前提下所进行的压缩。</p>
<p>主要采用以下四种内容编码的方式：</p>
<ul>
<li><strong>gzip</strong></li>
<li><strong>compress</strong></li>
<li><strong>deflate</strong></li>
<li><strong>identity</strong></li>
</ul>
<h4 id="6-6-3-Content-Language"><a href="#6-6-3-Content-Language" class="headerlink" title="6.6.3 Content-Language"></a>6.6.3 Content-Language</h4><pre><code class="lang-http">Content-Language: zh-CN
</code></pre>
<p>首部字段<code>Content-Language</code>会告知客户端，实体主体使用的<strong>自然语言</strong>。</p>
<h4 id="6-6-4-Content-Length"><a href="#6-6-4-Content-Length" class="headerlink" title="6.6.4 Content-Length"></a>6.6.4 Content-Length</h4><pre><code class="lang-http">Content-Length: 15000
</code></pre>
<p>首部字段<code>Content-Length</code>表明了<strong>实体主体部分的大小</strong>（单位是字节）。</p>
<p>对实体主体进行内容编码传输时，不能再使用<code>Content-Length</code>首部字段。</p>
<h4 id="6-6-5-Content-Location"><a href="#6-6-5-Content-Location" class="headerlink" title="6.6.5 Content-Location"></a>6.6.5 Content-Location</h4><pre><code class="lang-http">Content-Location: http://www.hackr.jp/index-ja.html
</code></pre>
<p>首部字段<code>Content-Location</code>给出<strong>与报文主体部分相对应的 URI</strong>。和首部字段<code>Location</code>不同，<code>Content-Location</code>表示的是报文主体返回资源对应的 URI。</p>
<h4 id="6-6-6-Content-MD5"><a href="#6-6-6-Content-MD5" class="headerlink" title="6.6.6 Content-MD5"></a>6.6.6 Content-MD5</h4><pre><code class="lang-http">Content-MD5: OGFkZDUwNGVhNGY3N2MxMDIwZmQ4NTBmY2IyTY==
</code></pre>
<p>首部字段<code>Content-MD5</code>是一串由 MD5 算法生成的值，其目的在于<strong>检查报文主体在传输过程中是否保持完整</strong>，以及<strong>确认传输到达</strong>。</p>
<p>对报文主体执行 MD5 算法获得的 128 位二进制数，再通过 <strong>Base64 编码</strong>后将结果写入<code>Content-MD5</code>字段值。<strong>由于 HTTP 首部无法记录二进制值，所以要通过 Base64 编码处理</strong>。为确保报文的有效性，作为接收方的客户端会对报文主体再执行一次相同的 MD5 算法。计算出的值与字段值作比较后，即可判断出报文主体的准确性。</p>
<blockquote>
<p>采用这种方法，对内容上的偶发性改变是无从查证的，也无法检测出恶意篡改。其中一个原因在于，内容如果能够被篡改，那么同时意味着<code>Content-MD5</code>也可重新计算然后被篡改。所以处在接收阶段的客户端是无法意识到报文主体以及首部字段<code>Content-MD5</code>是已经被篡改过的。</p>
</blockquote>
<h4 id="6-6-7-Content-Range"><a href="#6-6-7-Content-Range" class="headerlink" title="6.6.7 Content-Range"></a>6.6.7 Content-Range</h4><pre><code class="lang-http">Content-Range: bytes 5001-10000/10000
</code></pre>
<p>针对范围请求，返回响应时使用的首部字段<code>Content-Range</code>，能<strong>告知客户端作为响应返回的实体的哪个部分符合范围请求</strong>。字段值<strong>以字节为单位</strong>，表示当前发送部分及整个实体大小。</p>
<h4 id="6-6-8-Content-Type"><a href="#6-6-8-Content-Type" class="headerlink" title="6.6.8 Content-Type"></a>6.6.8 Content-Type</h4><pre><code class="lang-http">Content-Type: text/html; charset=UTF-8
</code></pre>
<p>首部字段<code>Content-Type</code>说明了<strong>实体主体内对象的媒体类型</strong>。和首部字段<code>Accept</code>一样，字段值用<code>type/subtype</code>形式赋值。</p>
<p>参数<code>charset</code>使用<code>iso-8859-1</code>或<code>euc-jp</code>等字符集进行赋值。</p>
<h4 id="6-6-9-Expires"><a href="#6-6-9-Expires" class="headerlink" title="6.6.9 Expires"></a>6.6.9 Expires</h4><pre><code class="lang-http">Expires: Wed, 04 Jul 2012 08:26:05 GMT
</code></pre>
<p>首部字段<code>Expires</code>会将<strong>资源失效的日期</strong>告知客户端。缓存服务器在接收到含有首部字段<code>Expires</code>的响应后，会以缓存来应答请求，在<code>Expires</code>字段值指定的时间之前，响应的副本会一直被保存。当超过指定的时间后，缓存服务器在请求发送过来时，会转向源服务器请求资源。</p>
<p>源服务器不希望缓存服务器对资源缓存时，最好在<code>Expires</code>字段内写入与首部字段<code>Date</code>相同的时间值。</p>
<blockquote>
<p>但是，当首部字段<code>Cache-Control</code>有指定<code>max-age</code>指令时，比起首部字段<code>Expires</code>，会优先处理<code>max-age</code>指令。</p>
</blockquote>
<h4 id="6-6-10-Last-Modified"><a href="#6-6-10-Last-Modified" class="headerlink" title="6.6.10 Last-Modified"></a>6.6.10 Last-Modified</h4><pre><code class="lang-http">Last-Modified: Wed, 23 May 2012 09:59:55 GMT
</code></pre>
<p>首部字段<code>Last-Modified</code>指明<strong>资源最终修改的时间</strong>。</p>
<p>一般来说，这个值就是<code>Request-URI</code>指定资源被修改的时间。但类似使用 CGI 脚本进行动态数据处理时，该值有可能会变成数据最终修改时的时间。</p>
<h3 id="6-7-为-Cookie-服务的首部字段"><a href="#6-7-为-Cookie-服务的首部字段" class="headerlink" title="6.7 为 Cookie 服务的首部字段"></a>6.7 为 Cookie 服务的首部字段</h3><p>管理服务器与客户端之间状态的 Cookie，虽然没有被编入标准化 HTTP/1.1 的 RFC2616 中，但在 Web 网站方面得到了广泛的应用。</p>
<p>Cookie 的工作机制是<strong>用户识别及状态管理</strong>。Web 网站为了管理用户的状态会通过 Web 浏览器，<strong>把一些数据临时写入用户的计算机内</strong>。接着当用户访问该Web网站时，<strong>可通过通信方式取回之前发放的 Cookie</strong>。</p>
<p>调用 Cookie 时，由于<strong>可校验 Cookie 的有效期，以及发送方的域、路径、协议*等信息</strong>，所以正规发布的 Cookie 内的数据不会因来自其他 Web 站点和攻击者的攻击而泄露。</p>
<p>下面的表格列举了与 Cookie 有关的首部字段。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">首部字段名</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">首部类型</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>Set-Cookie</strong></td>
<td style="text-align:center">开始状态管理所使用的 Cookie 信息</td>
<td style="text-align:center">响应首部字段</td>
</tr>
<tr>
<td style="text-align:center"><strong>Cookie</strong></td>
<td style="text-align:center">服务器接收到的 Cookie 信息</td>
<td style="text-align:center">请求首部字段</td>
</tr>
</tbody>
</table>
</div>
<h4 id="6-7-1-Set-Cookie"><a href="#6-7-1-Set-Cookie" class="headerlink" title="6.7.1 Set-Cookie"></a>6.7.1 Set-Cookie</h4><pre><code class="lang-http">Set-Cookie: status=enable; expires=Tue, 05 Jul 2011 07:26:31 GMT; path=/; domain=.hackr.jp;
</code></pre>
<p>当服务器准备开始管理客户端的状态时，会事先告知各种信息。</p>
<p>下面的表格列举了<code>Set-Cookie</code>的字段值。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">NAME=VALUE</td>
<td style="text-align:center">赋予 Cookie 的名称和其值（必需项）</td>
</tr>
<tr>
<td style="text-align:center">expires=DATE</td>
<td style="text-align:center">Cookie 的有效期</td>
</tr>
<tr>
<td style="text-align:center">path=PATH</td>
<td style="text-align:center">将服务器上的文件目录作为 Cookie 的适用对象</td>
</tr>
<tr>
<td style="text-align:center">domain=域名</td>
<td style="text-align:center">作为 Cookie 适用对象的域名</td>
</tr>
<tr>
<td style="text-align:center">Secure</td>
<td style="text-align:center">仅在 HTTPS 安全通信时才会发送 Cookie</td>
</tr>
<tr>
<td style="text-align:center">HttpOnly</td>
<td style="text-align:center">加以限制，使 Cookie 不能被 JavaScript 脚本访问</td>
</tr>
</tbody>
</table>
</div>
<h4 id="6-7-2-Cookie"><a href="#6-7-2-Cookie" class="headerlink" title="6.7.2 Cookie"></a>6.7.2 Cookie</h4><pre><code class="lang-http">Cookie: status=enable
</code></pre>
<p>首部字段<code>Cookie</code>会告知服务器，当客户端想获得 HTTP 状态管理支持时，就会在请求中包含从服务器接收到的<code>Cookie</code>。</p>
<p>接收到多个<code>Cookie</code>时，同样可以以多个<code>Cookie</code>形式发送。</p>
<h3 id="6-8-其他首部字段"><a href="#6-8-其他首部字段" class="headerlink" title="6.8 其他首部字段"></a>6.8 其他首部字段</h3><h4 id="6-8-1-X-Frame-Options"><a href="#6-8-1-X-Frame-Options" class="headerlink" title="6.8.1 X-Frame-Options"></a>6.8.1 X-Frame-Options</h4><pre><code class="lang-http">X-Frame-Options: DENY
</code></pre>
<p>首部字段<code>X-Frame-Options</code>属于 HTTP <strong>响应首部</strong>，用于<strong>控制网站内容在其他 Web 网站的 Frame 标签内的显示问题</strong>。其主要目的是为了防止点击劫持（clickjacking）攻击。</p>
<h4 id="6-8-2-X-XSS-Protection"><a href="#6-8-2-X-XSS-Protection" class="headerlink" title="6.8.2 X-XSS-Protection"></a>6.8.2 X-XSS-Protection</h4><pre><code class="lang-http">X-XSS-Protection: 1
</code></pre>
<p>首部字段<code>X-XSS-Protection</code>属于 HTTP <strong>响应首部</strong>，它是针对跨站脚本攻击（XSS）的一种对策，用于<strong>控制浏览器 XSS 防护机制</strong>的开关。</p>
<h4 id="6-8-3-DNT"><a href="#6-8-3-DNT" class="headerlink" title="6.8.3 DNT"></a>6.8.3 DNT</h4><pre><code class="lang-http">DNT: 1
</code></pre>
<p>首部字段<code>DNT</code>属于 HTTP <strong>请求首部</strong>，其中<code>DNT</code>是 <strong>Do Not Track</strong>（请勿跟踪） 的简称，意为拒绝个人信息被收集，是表示拒绝被精准广告追踪的一种方法。</p>
<h4 id="6-8-4-P3P"><a href="#6-8-4-P3P" class="headerlink" title="6.8.4 P3P"></a>6.8.4 P3P</h4><pre><code class="lang-http">P3P: CP=&quot;CAO DSP LAW CURa ADMa DEVa TAIa PSAa PSDa IVAa IVDa OUR BUS IND UNI COM NAV INT&quot;
</code></pre>
<p>首部字段<code>P3P</code>属于 HTTP 响应首部，通过利用 P3P（The Platform for Privacy Preferences，在线隐私偏好平台）技术，可以让 Web 网站上的个人隐私变成一种仅供程序可理解的形式，以达到<strong>保护用户隐私</strong>的目的。</p>
<div><strong>🚩推荐阅读</strong>（由<a href="https://github.com/huiwang/hexo-recommended-posts">hexo文章推荐插件</a>驱动）<ul><li><a href="https://abelsu7.top/2019/03/18/understanding-linux-kernel/">Linux 内核笔记 1：绪论</a></li><li><a href="https://abelsu7.top/2019/03/11/core-java-notes-5/">Java 笔记 5：集合</a></li><li><a href="https://abelsu7.top/2019/03/11/core-java-notes-6/">Java 笔记 6：异常、断言和日志</a></li><li><a href="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/">5 分钟 Docker 笔记 5：存储</a></li><li><a href="https://qinyuanpei.github.io/posts/2015300310/">Referrer还是Referer? 一个迷人的错误</a></li><li><a href="https://blog.yuanpei.me/posts/2015300310/">Referrer还是Referer? 一个迷人的错误</a></li></ul></div>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-09-01T13:04:11.359Z" itemprop="dateUpdated">2019-09-01 21:04:11</time>
</span><br>


        
        文章发布地址：<a href="/2018/10/22/http-notes-part-3/" target="_blank" rel="external">https://abelsu7.top/2018/10/22/http-notes-part-3/</a>
        
    </div>
    
    <footer>
        <a href="https://abelsu7.top">
            <img src="/img/fong.jpg" alt="Abel Su">
            Abel Su
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书/">读书</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2018/10/22/http-notes-part-3/&title=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2018/10/22/http-notes-part-3/&title=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&source=
                
                    
                    
                
..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2018/10/22/http-notes-part-3/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&url=https://abelsu7.top/2018/10/22/http-notes-part-3/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2018/10/22/http-notes-part-3/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/10/23/http-notes-part-4/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HTTP 笔记 4：HTTPS 及用户身份认证</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/10/22/http-notes-part-2/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">HTTP 笔记 2：HTTP 报文信息及状态码</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment v" id="vcomments"></div>
    <!-- <div class="comment" id="comment"></div> -->
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
    <!-- <script src="//t1.aixinxi.net/o_1c3n4pim01nl3jg91b6l1kjtkvsa.js"></script> -->
    <!-- <script src="/js/Valine.min.js"></script> -->
    <!-- <script src="https://cdnjs.cat.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <script src="//cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            av: AV,
            // el: '#comments',
            el: '#vcomments',
            emoticon_url: 'https://abelsu7.top/alu', //表情图片网址
            emoticon_list: ["赞一个.png","坐等.png","长草.png","阴暗.png","邪恶.png","小眼睛.png","想一想.png","献黄瓜.png","献花.png","喜极而泣.png","无语.png","无所谓.png","无奈.png","投降.png","深思.png","期待.png","狂汗.png","蜡烛.png","看不见.png","惊喜.png","击掌.png","欢呼.png","得意.png","不出所料.png","观察.png"],//表情图片文件名
            // notify: 'false' == 'false',
            // verify: 'false' == 'false',
            // notify: 'false',
            // verify: 'false',
            notify: false,
            verify: false,
            appId: "aP2YQo0mfrRpTLrLb1bchILb-gzGzoHsz",
            appKey: "Cp82umQdGScRRFUYLmob6yyK",
            avatar: "mp",
            placeholder: "Write a comment",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢支持！
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-item switch">切换</span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


            <p>
                
                    <span>
                        <a href="/atom.xml" target="_blank" class="rss" title="rss">
                            <i class="icon icon-lg icon-rss"></i>
                        </a>
                    </span>
                    
                        <span>
                            博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a>
                        </span>
            </p>
    </div>
    <div class="bottom">
        <p>
            <span>
                Abel Su &copy;
                    
                        2018 -
                            
                                2020
            </span>
            <span>
                
                    <a href="http://beian.miit.gov.cn/" target="_blank">
                        粤ICP备16068788号-2
                    </a>
                    <br>
                    
                        Power by
                        <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
                        <a href="https://github.com/abelsu7/hexo-theme-indigo-plus" target="_blank">indigo plus</a>
                        <p>Hosted by <a href="https://cloud.tencent.com/product/cos" target="_blank" style="font-weight: bold">腾讯云 COS</a></p>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>
<a href="javascript:;" id="gobottom" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-comments"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2018/10/22/http-notes-part-3/&title=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2018/10/22/http-notes-part-3/&title=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&source=
                
                    
                    
                
..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2018/10/22/http-notes-part-3/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HTTP 笔记 3：Web 服务器及 HTTP 首部》 — Keep Coding&url=https://abelsu7.top/2018/10/22/http-notes-part-3/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2018/10/22/http-notes-part-3/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3ay47CMBBE0fz/TxuJFRKyqao2iLSvVwgSJ2cWPe7HdclrPNfr5/dvZr/q38+u2bZgwIBxW8ZYrtmLvn9e7+k+XX83GDBgnMNQguw6dCoBOrt3fQ0MGDBg6AE0C9B6oIcBAwYMN/BlSD2VhQEDBowsiXVTXD1xXRfyNufiMGDAuCEjawz85vPX+xswYMD4e8aIVlb614+A9vvAgAGjNUMv9OtJr5Ks6gMcRiCGAQNGU4Y7ZlEZ5FIGxcJmJwwYMFozske6YbFSLCvl5TBgwGjBcIv4Orhyr9swgAEDxmkMd+gha0/qTVCj0AYDBoxjGO6mbgNASWKVpqb0fwMGDBjtGPoruq+iNxLclicMGDBOYOiJqHJlNmDhNjunz4UBA0Zrhjt4kaWgbjjOhjlgwIDRm1FJXN3BiKzMZ7czYcCA0YhRGX2oBFB9h/CECwMGjBYM9wiYHR8rjYQNY2EwYMBoypAK8eafQ9/fPiDCgAGjNSM7rrmtxyxN3XAMhQEDRiOGEs6yAdN6IDYWDBgwDmYoh7bsGFcZ8vhQdIMBA0Y7hpvWZuU2JUBnzQkYMGD0ZgxzKQ/YNVSh7wYDBozejL0Z4rfvqg92wIAB474MJcjqKWXl4JjtAwMGjHMY9WaAWxrL0tfps2DAgAHDDItuglq5CwYMGDDcw1xWXHMbnDBgwDiToQ9VKG2DUVhXtmDAgNGasW1Sw0xcszS4xIYBA8b9GA+LDQPxNgqeswAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/prism.min.js?v=1.7.2"></script>
<script src="/js/prism-vim.min.js?v=1.7.2"></script>
</body>
</html>
