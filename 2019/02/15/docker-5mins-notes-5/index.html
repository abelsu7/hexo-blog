<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?c61262c25ca5d4ed66df331a31b5bf49"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="cc3c_UncRv21aEZwqejVxKpUMR7h9ldNUTeYjawUS-g">
    
    
    <meta name="baidu-site-verification" content="HnoV7q61W5">
    
    
    
    <title>5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ | Keep Coding | è‹æ˜“åŒ—</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="è¯»ä¹¦,å®¹å™¨,Docker">
    <meta name="description" content="Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†                                                                                               ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹">
<meta name="keywords" content="è¯»ä¹¦,å®¹å™¨,Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨">
<meta property="og:url" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/index.html">
<meta property="og:site_name" content="Keep Coding">
<meta property="og:description" content="Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†                                                                                               ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/cover.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/docker-layer.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/volume-1.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/volume-2.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/volume-3.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/volume-4.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/volume-share-1.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/vc-1.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/vc-2.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/datapacked-vc.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/datapacked-vc-2.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/datapacked-vc-3.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/rm-volume-1.jpg">
<meta property="og:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/rm-volume-2.jpg">
<meta property="og:updated_time" content="2019-09-01T13:04:11.160Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨">
<meta name="twitter:description" content="Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†                                                                                               ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹">
<meta name="twitter:image" content="https://abelsu7.top/2019/02/15/docker-5mins-notes-5/cover.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="Keep Coding" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <link rel="stylesheet" href="/css/prism/prism-tomorrow-night.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-list-ul"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/back_blue.png)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/fong.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Abel Su</h5>
          <a href="mailto:abelsu7@gmail.com" title="abelsu7@gmail.com" class="mail">abelsu7@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                å½’æ¡£
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                åˆ†ç±»
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                æ ‡ç­¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top"  >
                <i class="icon icon-lg icon-sticky-note"></i>
                ç¬”è®°
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/abelsu7"  >
                <i class="icon icon-lg icon-github"></i>
                ä»£ç 
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friends/"  >
                <i class="icon icon-lg icon-user"></i>
                å‹é“¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/bookmarks/"  >
                <i class="icon icon-lg icon-bookmark"></i>
                æ”¶è—
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/books/"  >
                <i class="icon icon-lg icon-book"></i>
                è¯»ä¹¦
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/movies/"  >
                <i class="icon icon-lg icon-film"></i>
                å½±è§†
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/games/"  >
                <i class="icon icon-lg icon-gamepad"></i>
                æ¸¸æˆ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top/#/links/wechat"  >
                <i class="icon icon-lg icon-wechat"></i>
                å¾®ä¿¡
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/2018/09/21/how-to-learn-coding/"  >
                <i class="icon icon-lg icon-code"></i>
                å­¦ä¹ 
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/wiki/"  >
                <i class="icon icon-lg icon-sort-alpha-asc"></i>
                é€ŸæŸ¥
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-info-circle"></i>
                å…³äº
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-02-15T07:35:43.000Z" itemprop="datePublished" class="page-time">
  2019-02-15
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Docker/">Docker</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç¬¬-6-ç« -Docker-å­˜å‚¨"><span class="post-toc-text">ç¬¬ 6 ç«  Docker å­˜å‚¨</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-1-Docker-çš„ä¸¤ç±»å­˜å‚¨èµ„æº"><span class="post-toc-text">6.1 Docker çš„ä¸¤ç±»å­˜å‚¨èµ„æº</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-1-Storage-Driver"><span class="post-toc-text">6.1.1 Storage Driver</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-1-2-Data-Volume"><span class="post-toc-text">6.1.2 Data Volume</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#bind-mount"><span class="post-toc-text">bind mount</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#docker-managed-volume"><span class="post-toc-text">docker managed volume</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#bing-mount-å’Œ-docker-managed-volume-å¯¹æ¯”"><span class="post-toc-text">bing mount å’Œ docker managed volume å¯¹æ¯”</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-å…±äº«æ•°æ®"><span class="post-toc-text">6.2 å…±äº«æ•°æ®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-1-å®¹å™¨ä¸-host-å…±äº«æ•°æ®"><span class="post-toc-text">6.2.1 å®¹å™¨ä¸ host å…±äº«æ•°æ®</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-2-å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®"><span class="post-toc-text">6.2.2 å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-3-ä½¿ç”¨-volume-container-å…±äº«æ•°æ®"><span class="post-toc-text">6.2.3 ä½¿ç”¨ volume container å…±äº«æ•°æ®</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-2-4-data-packed-volume-container"><span class="post-toc-text">6.2.4 data-packed volume container</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-volume-ç”Ÿå‘½å‘¨æœŸç®¡ç†"><span class="post-toc-text">6.3 volume ç”Ÿå‘½å‘¨æœŸç®¡ç†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-1-volume-å¤‡ä»½"><span class="post-toc-text">6.3.1 volume å¤‡ä»½</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-2-volume-æ¢å¤"><span class="post-toc-text">6.3.2 volume æ¢å¤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-3-volume-è¿ç§»"><span class="post-toc-text">6.3.3 volume è¿ç§»</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-3-4-volume-é”€æ¯"><span class="post-toc-text">6.3.4 volume é”€æ¯</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-4-å°ç»“"><span class="post-toc-text">6.4 å°ç»“</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-docker-5mins-notes-5"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-02-15 15:35:43" datetime="2019-02-15T07:35:43.000Z"  itemprop="datePublished">2019-02-15</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Docker/">Docker</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p><strong><em>Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†</em></strong></p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/cover.jpg" alt="ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹" title>
                </div>
                <div class="image-caption">ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹</div>
            </figure>
<a id="more"></a>
<h2 id="ç¬¬-6-ç« -Docker-å­˜å‚¨"><a href="#ç¬¬-6-ç« -Docker-å­˜å‚¨" class="headerlink" title="ç¬¬ 6 ç«  Docker å­˜å‚¨"></a>ç¬¬ 6 ç«  Docker å­˜å‚¨</h2><h3 id="6-1-Docker-çš„ä¸¤ç±»å­˜å‚¨èµ„æº"><a href="#6-1-Docker-çš„ä¸¤ç±»å­˜å‚¨èµ„æº" class="headerlink" title="6.1 Docker çš„ä¸¤ç±»å­˜å‚¨èµ„æº"></a>6.1 Docker çš„ä¸¤ç±»å­˜å‚¨èµ„æº</h3><p><strong>Docker</strong> ä¸ºå®¹å™¨æä¾›äº†<strong>ä¸¤ç§å­˜æ”¾æ•°æ®çš„èµ„æº</strong>ï¼š</p>
<ol>
<li>ç”± Storage Driver ç®¡ç†çš„<strong>é•œåƒå±‚</strong>å’Œ<strong>å®¹å™¨å±‚</strong></li>
<li><strong>Data Volume</strong></li>
</ol>
<h4 id="6-1-1-Storage-Driver"><a href="#6-1-1-Storage-Driver" class="headerlink" title="6.1.1 Storage Driver"></a>6.1.1 Storage Driver</h4><p>å…ˆæ¥å›é¡¾ä¸€ä¸‹ <strong>Docker é•œåƒçš„åˆ†å±‚ç»“æ„</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/docker-layer.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å®¹å™¨ç”±æœ€ä¸Šé¢ä¸€ä¸ª<strong>å¯å†™çš„å®¹å™¨å±‚</strong>ï¼Œä»¥åŠ<strong>è‹¥å¹²åªè¯»çš„é•œåƒå±‚</strong>ç»„æˆï¼Œå®¹å™¨çš„æ•°æ®å°±å­˜æ”¾åœ¨è¿™äº›å±‚ä¸­ã€‚è¿™æ ·çš„åˆ†å±‚ç»“æ„æœ€å¤§çš„ç‰¹æ€§æ˜¯ <strong>Copy-on-Write</strong>ï¼š</p>
<ol>
<li><strong>æ–°æ•°æ®</strong>ä¼šç›´æ¥å­˜æ”¾åœ¨<strong>æœ€ä¸Šé¢çš„å®¹å™¨å±‚</strong></li>
<li><strong>ä¿®æ”¹ç°æœ‰æ•°æ®</strong>ä¼š<strong>å…ˆä»é•œåƒå±‚å°†æ•°æ®å¤åˆ¶åˆ°å®¹å™¨å±‚</strong>ï¼Œä¿®æ”¹åçš„æ•°æ®<strong>ç›´æ¥ä¿å­˜åœ¨å®¹å™¨å±‚ä¸­ï¼Œé•œåƒå±‚ä¿æŒä¸å˜</strong></li>
<li>å¦‚æœå¤šä¸ªå±‚ä¸­æœ‰å‘½åç›¸åŒçš„æ–‡ä»¶ï¼Œç”¨æˆ·<strong>åªèƒ½çœ‹åˆ°æœ€ä¸Šé¢é‚£å±‚ä¸­çš„æ–‡ä»¶</strong></li>
</ol>
<p>åˆ†å±‚ç»“æ„ä½¿é•œåƒå’Œå®¹å™¨çš„åˆ›å»ºã€å…±äº«ä»¥åŠåˆ†å‘å˜å¾—éå¸¸é«˜æ•ˆï¼Œè€Œè¿™äº›éƒ½è¦å½’åŠŸäº <strong>Docker Storage Driver</strong>ã€‚æ­£æ˜¯ storage driver <strong>å®ç°äº†å¤šå±‚æ•°æ®çš„å †å å¹¶ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªå•ä¸€çš„åˆå¹¶ä¹‹åçš„ç»Ÿä¸€è§†å›¾</strong>ã€‚</p>
<blockquote>
<p>Docker ä¼šé»˜è®¤<strong>ä¼˜å…ˆä½¿ç”¨ Linux å‘è¡Œç‰ˆé»˜è®¤çš„ Storage Driver</strong>ã€‚</p>
</blockquote>
<p><strong>Docker å®‰è£…æ—¶ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„é…ç½®é€‰æ‹©é»˜è®¤çš„ driver</strong>ã€‚é»˜è®¤ driver å…·æœ‰æœ€å¥½çš„ç¨³å®šæ€§ï¼Œå› ä¸ºé»˜è®¤ driver åœ¨å‘è¡Œç‰ˆä¸Šç»è¿‡äº†ä¸¥æ ¼çš„æµ‹è¯•ã€‚</p>
<p>è¿è¡Œ<code>docker info</code>å¯æŸ¥çœ‹ Storage Driver çš„ç›¸å…³ä¿¡æ¯ï¼š</p>
<pre><code class="lang-bash">[root@localhost ~]# docker info
Containers: 3
 Running: 0
 Paused: 0
 Stopped: 3
Images: 4
Server Version: 18.09.2
Storage Driver: overlay2
 Backing Filesystem: xfs
 Supports d_type: true
 Native Overlay Diff: true
Logging Driver: json-file
Cgroup Driver: cgroupfs
Plugins:
 Volume: local
 Network: bridge host macvlan null overlay
 Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
Swarm: inactive
Runtimes: runc
Default Runtime: runc
Init Binary: docker-init
containerd version: 9754871865f7fe2f4e74d43e2fc7ccd237edcbce
runc version: 09c8266bf2fcf9519a651b04ae54c967b9ab86ec
init version: fec3683
Security Options:
 seccomp
  Profile: default
Kernel Version: 3.10.0-957.el7.x86_64
Operating System: CentOS Linux 7 (Core)
OSType: linux
Architecture: x86_64
CPUs: 6
Total Memory: 7.487GiB
Name: localhost.localdomain
ID: ZUUO:D7MX:3YFL:D67V:Y3DR:B57B:JAVB:IN7B:ZMWO:Q2SN:YNP4:TXP5
Docker Root Dir: /var/lib/docker
Debug Mode (client): false
Debug Mode (server): false
Registry: https://index.docker.io/v1/
Labels:
Experimental: false
Insecure Registries:
 127.0.0.0/8
Live Restore Enabled: false
Product License: Community Engine
</code></pre>
<h4 id="6-1-2-Data-Volume"><a href="#6-1-2-Data-Volume" class="headerlink" title="6.1.2 Data Volume"></a>6.1.2 Data Volume</h4><p><strong>Data Volume</strong> æœ¬è´¨ä¸Šæ˜¯ <strong>Docker Host æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•æˆ–æ–‡ä»¶</strong>ï¼Œèƒ½å¤Ÿ<strong>ç›´æ¥è¢« mount åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­</strong>ã€‚</p>
<p>Data Volume æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>Data Volume æ˜¯ç›®å½•æˆ–æ–‡ä»¶</strong>ï¼Œè€Œéæ²¡æœ‰æ ¼å¼åŒ–çš„ç£ç›˜ï¼ˆå—è®¾å¤‡ï¼‰</li>
<li>å®¹å™¨<strong>å¯ä»¥è¯»å†™ volume ä¸­çš„æ•°æ®</strong></li>
<li><strong>volume æ•°æ®å¯ä»¥è¢«æ°¸ä¹…çš„ä¿å­˜</strong>ï¼Œå³ä½¿ä½¿ç”¨å®ƒçš„å®¹å™¨å·²ç»è¢«é”€æ¯</li>
</ol>
<p>åœ¨å…·ä½“ä½¿ç”¨ä¸­åº”éµå¾ªè¿™æ ·çš„åŸåˆ™ï¼š</p>
<ol>
<li><strong>æ— çŠ¶æ€çš„æ•°æ®</strong>å­˜æ”¾åœ¨<strong>æ•°æ®å±‚ä¸­ï¼Œä½œä¸ºé•œåƒä¸€éƒ¨åˆ†</strong>ï¼›</li>
<li><strong>æœ‰çŠ¶æ€çš„æ•°æ®</strong>å­˜æ”¾åœ¨ <strong>Data Volume</strong> ä¸­ï¼Œå› ä¸ºè¿™æ˜¯<strong>éœ€è¦æŒä¹…åŒ–</strong>çš„æ•°æ®ï¼Œå¹¶ä¸”åº”è¯¥<strong>ä¸é•œåƒåˆ†å¼€å­˜æ”¾</strong>ã€‚</li>
</ol>
<p>åœ¨å…·ä½“ä½¿ç”¨ä¸Šï¼ŒDocker æä¾›äº†<strong>ä¸¤ç§ç±»å‹çš„ volume</strong>ï¼š<strong>bind mount</strong> å’Œ <strong>Docker managed volume</strong>ã€‚</p>
<h5 id="bind-mount"><a href="#bind-mount" class="headerlink" title="bind mount"></a>bind mount</h5><p>bing mount æ˜¯<strong>å°† host ä¸Šå·²å­˜åœ¨çš„ç›®å½•æˆ–æ–‡ä»¶ mount åˆ°å®¹å™¨</strong>ã€‚</p>
<p>ä¾‹å¦‚ <strong>Docker host</strong> ä¸Šæœ‰ç›®å½•<code>$HOME/htdocs</code>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/volume-1.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>é€šè¿‡<code>-v</code>å°†å…¶ <strong>mount åˆ° httpd å®¹å™¨</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/volume-2.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å‚æ•°<code>-v</code>çš„æ ¼å¼ä¸º<code>&lt;host_path&gt;:&lt;container_path&gt;</code>ï¼ŒåŸæœ‰çš„<strong>åŒåç›®å½•ä¼šè¢«éšè—èµ·æ¥</strong>ï¼Œè¿™ä¸ Linux ç³»ç»Ÿä¸­çš„<code>mount</code>å‘½ä»¤çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</p>
<blockquote>
<p><strong>bind mount å¯ä»¥è®© host ä¸å®¹å™¨å…±äº«æ•°æ®</strong>ï¼Œè¿™åœ¨ç®¡ç†ä¸Šæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œ<strong>ä½¿ç”¨ bind mount æ—¶è¿˜å¯ä»¥æŒ‡å®šæ•°æ®çš„è¯»å†™æƒé™ï¼Œé»˜è®¤æ˜¯å¯è¯»å¯å†™</strong>ï¼Œå¯æŒ‡å®šä¸ºåªè¯»ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/volume-3.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<p><code>ro</code>è®¾ç½®äº†<strong>åªè¯»æƒé™</strong>ã€‚<strong>åœ¨å®¹å™¨ä¸­æ˜¯æ— æ³•å¯¹ bind mount æ•°æ®è¿›è¡Œä¿®æ”¹çš„ï¼Œåªæœ‰ host æœ‰æƒä¿®æ”¹æ•°æ®</strong>ï¼Œæé«˜äº†å®‰å…¨æ€§ã€‚</p>
</blockquote>
<p>é™¤äº† bind mount ç›®å½•ï¼Œè¿˜å¯ä»¥<strong>å•ç‹¬æŒ‡å®šä¸€ä¸ªæ–‡ä»¶</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/volume-4.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>ä½¿ç”¨ bind mount å•ä¸ªæ–‡ä»¶çš„åœºæ™¯æ˜¯ï¼š<strong>åªéœ€è¦å‘å®¹å™¨æ·»åŠ æ–‡ä»¶ï¼Œä¸å¸Œæœ›è¦†ç›–æ•´ä¸ªç›®å½•</strong>ã€‚</p>
<blockquote>
<p>ä½¿ç”¨å•ä¸€æ–‡ä»¶æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼š<strong>host ä¸­çš„æºæ–‡ä»¶å¿…é¡»è¦å­˜åœ¨ï¼Œä¸ç„¶ä¼šå½“ä½œä¸€ä¸ªæ–°ç›®å½• bind mount ç»™å®¹å™¨</strong>ã€‚</p>
</blockquote>
<p>bind mount çš„ä½¿ç”¨ç›´è§‚é«˜æ•ˆï¼Œæ˜“äºç†è§£ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸è¶³çš„åœ°æ–¹ï¼š<strong>bind mount éœ€è¦æŒ‡å®š host æ–‡ä»¶ç³»ç»Ÿçš„ç‰¹å®šè·¯å¾„ï¼Œè¿™å°±é™åˆ¶äº†å®¹å™¨çš„å¯ç§»æ¤æ€§</strong>ï¼Œå½“éœ€è¦å°†å®¹å™¨è¿ç§»åˆ°å…¶ä»– hostï¼Œè€Œè¯¥ host æ²¡æœ‰è¦ mount çš„æ•°æ®æˆ–è€…æ•°æ®ä¸åœ¨ç›¸åŒçš„è·¯å¾„æ—¶ï¼Œæ“ä½œä¼šå¤±è´¥ã€‚</p>
<p><strong>ç§»æ¤æ€§æ›´å¥½çš„æ–¹å¼æ˜¯ docker managed volume</strong>ã€‚</p>
<h5 id="docker-managed-volume"><a href="#docker-managed-volume" class="headerlink" title="docker managed volume"></a>docker managed volume</h5><p>docker managed volume ä¸ bind mount åœ¨ä½¿ç”¨ä¸Šçš„æœ€å¤§åŒºåˆ«æ˜¯<strong>ä¸éœ€è¦æŒ‡å®š mount æºï¼ŒæŒ‡æ˜ mount point å°±è¡Œäº†</strong>ã€‚</p>
<p>ä»¥ httpd å®¹å™¨ä¸ºä¾‹ï¼š</p>
<pre><code class="lang-bash">[root@localhost ~]# docker run -d -p 80:80 -v /usr/local/apache2/htdocs httpd
2e973f7246b72d60c42e0a124d8bcb4e8ba053c4eb946de6c6d2ec5d2fb29cdd
</code></pre>
<p>ä¸Šè¿°å‘½ä»¤é€šè¿‡<code>-v</code>å‘Šè¯‰ Docker éœ€è¦ä¸€ä¸ª data volumeï¼Œå¹¶å°†å…¶ mount åˆ°<code>/usr/local/apache2/htdocs</code>ã€‚</p>
<p>æ‰§è¡Œ<code>docker inspect</code>å‘½ä»¤ï¼š</p>
<pre><code class="lang-bash">[root@localhost ~]# docker inspect 2e97
...
        &quot;Mounts&quot;: [
            {
                &quot;Type&quot;: &quot;volume&quot;,
                &quot;Name&quot;: &quot;bb76558c26ec96b8f2fd9aced58105495b610119520dbe84c3f83bc347bc2209&quot;,
                &quot;Source&quot;: &quot;/var/lib/docker/volumes/bb76558c26ec96b8f2fd9aced58105495b610119520dbe84c3f83bc347bc2209/_data&quot;,
                &quot;Destination&quot;: &quot;/usr/local/apache2/htdocs&quot;,
                &quot;Driver&quot;: &quot;local&quot;,
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;&quot;
            }
        ],
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°<code>Source</code>å°±æ˜¯è¯¥ Volume åœ¨ host ä¸Šçš„ç›®å½•ã€‚<strong>æ¯å½“å®¹å™¨ç”³è¯·ä¸€ä¸ª docker managed volume æ—¶ï¼ŒDocker éƒ½ä¼šåœ¨</strong><code>/var/lib/docker/volumes</code><strong>ä¸‹ç”Ÿæˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯ mount æº</strong>ã€‚æŸ¥çœ‹è¯¥ volume ä¸‹çš„æ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="lang-bash">[root@localhost ~]# ls /var/lib/docker/volumes/bb76558c26ec96b8f2fd9aced58105495b610119520dbe84c3f83bc347bc2209/_data
index.html
</code></pre>
<p>æ€»ç»“ä¸€ä¸‹ <strong>docker managed volume çš„åˆ›å»ºè¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>å®¹å™¨å¯åŠ¨æ—¶ï¼Œç®€å•çš„å‘Šè¯‰ docker â€œæˆ‘éœ€è¦ä¸€ä¸ª volume å­˜æ”¾æ•°æ®ï¼Œå¸®æˆ‘ mount åˆ°ç›®å½• <code>/abc</code>â€œã€‚</li>
<li>docker åœ¨<code>/var/lib/docker/volumes</code>ä¸­ç”Ÿæˆä¸€ä¸ªéšæœºç›®å½•ä½œä¸º mount æº</li>
<li>å¦‚æœ<code>/abc</code>å·²ç»å­˜åœ¨ï¼Œåˆ™å°†æ•°æ®å¤åˆ¶åˆ° mount æº</li>
<li>å°† volume mount åˆ°<code>/abc</code></li>
</ol>
<p>è¿˜<strong>å¯ä»¥é€šè¿‡</strong><code>docker volume</code><strong>å‘½ä»¤æŸ¥çœ‹ docker managed volume</strong>ï¼Œä¸è¿‡<strong>çœ‹ä¸åˆ° bing mount</strong>ï¼Œè€Œä¸”ä¹Ÿ<strong>æ— æ³•çŸ¥é“ volume å¯¹åº”çš„å®¹å™¨</strong>ï¼š</p>
<pre><code class="lang-bash">[root@localhost ~]# docker volume ls
DRIVER              VOLUME NAME
local               bb76558c26ec96b8f2fd9aced58105495b610119520dbe84c3f83bc347bc2209
</code></pre>
<h5 id="bing-mount-å’Œ-docker-managed-volume-å¯¹æ¯”"><a href="#bing-mount-å’Œ-docker-managed-volume-å¯¹æ¯”" class="headerlink" title="bing mount å’Œ docker managed volume å¯¹æ¯”"></a>bing mount å’Œ docker managed volume å¯¹æ¯”</h5><p><strong>ç›¸åŒç‚¹</strong>ï¼šéƒ½æ˜¯ <strong>host æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªè·¯å¾„</strong></p>
<p><strong>ä¸åŒç‚¹</strong>ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"><strong>bind mount</strong></th>
<th style="text-align:left"><strong>docker managed volume</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>volume ä½ç½®</strong></td>
<td style="text-align:left">å¯ä»»æ„æŒ‡å®š</td>
<td style="text-align:left">/var/lib/docker/volumes/â€¦</td>
</tr>
<tr>
<td style="text-align:left"><strong>å¯¹å·²æœ‰ mount point å½±å“</strong></td>
<td style="text-align:left">éšè—å¹¶æ›¿æ¢ä¸º volume</td>
<td style="text-align:left">åŸæœ‰æ•°æ®å¤åˆ¶åˆ° volume</td>
</tr>
<tr>
<td style="text-align:left"><strong>æ˜¯å¦æ”¯æŒå•ä¸ªæ–‡ä»¶</strong></td>
<td style="text-align:left">æ”¯æŒ</td>
<td style="text-align:left">ä¸æ”¯æŒï¼Œåªèƒ½æ˜¯ç›®å½•</td>
</tr>
<tr>
<td style="text-align:left"><strong>æƒé™æ§åˆ¶</strong></td>
<td style="text-align:left">å¯è®¾ç½®ä¸ºåªè¯»ï¼Œé»˜è®¤ä¸ºè¯»å†™æƒé™</td>
<td style="text-align:left">æ— æ§åˆ¶ï¼Œå‡ä¸ºè¯»å†™æƒé™</td>
</tr>
<tr>
<td style="text-align:left"><strong>ç§»æ¤æ€§</strong></td>
<td style="text-align:left">ç§»æ¤æ€§å¼±ï¼Œä¸ host path ç»‘å®š</td>
<td style="text-align:left">ç§»æ¤æ€§å¼ºï¼Œæ— éœ€æŒ‡å®š host ç›®å½•</td>
</tr>
</tbody>
</table>
</div>
<h3 id="6-2-å…±äº«æ•°æ®"><a href="#6-2-å…±äº«æ•°æ®" class="headerlink" title="6.2 å…±äº«æ•°æ®"></a>6.2 å…±äº«æ•°æ®</h3><h4 id="6-2-1-å®¹å™¨ä¸-host-å…±äº«æ•°æ®"><a href="#6-2-1-å®¹å™¨ä¸-host-å…±äº«æ•°æ®" class="headerlink" title="6.2.1 å®¹å™¨ä¸ host å…±äº«æ•°æ®"></a>6.2.1 å®¹å™¨ä¸ host å…±äº«æ•°æ®</h4><p><strong>bing mount</strong> ä¸ <strong>docker managed volume</strong> å‡å¯å®ç°<strong>åœ¨å®¹å™¨ä¸ host ä¹‹é—´å…±äº«æ•°æ®</strong>ã€‚</p>
<p>ç”¨ <strong>bind mount</strong> æ¥å…±äº«æ•°æ®éå¸¸ç®€å•ï¼š<strong>ç›´æ¥å°†è¦å…±äº«çš„ç›®å½• mount åˆ°å®¹å™¨</strong>ã€‚</p>
<p>è€Œå¯¹ä¸ <strong>docker managed volume</strong>ï¼Œç”±äº <strong>volume ä½äº host ä¸­çš„ç›®å½•ï¼Œæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶æ‰ç”Ÿæˆ</strong>ï¼Œæ‰€ä»¥éœ€è¦<strong>ä½¿ç”¨</strong><code>docker cp</code><strong>å°†å…±äº«æ•°æ®æ‹·è´åˆ° volume ä¸­</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/volume-share-1.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h4 id="6-2-2-å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®"><a href="#6-2-2-å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®" class="headerlink" title="6.2.2 å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®"></a>6.2.2 å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®</h4><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯<strong>å°†å…±äº«æ•°æ®æ”¾åœ¨ bind mount ä¸­ï¼Œç„¶åå°†å…¶ mount åˆ°å¤šä¸ªå®¹å™¨</strong>ã€‚</p>
<p>å¦ä¸€ç§åœ¨å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®çš„æ–¹å¼æ˜¯<strong>ä½¿ç”¨ volume container</strong>ã€‚</p>
<h4 id="6-2-3-ä½¿ç”¨-volume-container-å…±äº«æ•°æ®"><a href="#6-2-3-ä½¿ç”¨-volume-container-å…±äº«æ•°æ®" class="headerlink" title="6.2.3 ä½¿ç”¨ volume container å…±äº«æ•°æ®"></a>6.2.3 ä½¿ç”¨ volume container å…±äº«æ•°æ®</h4><p><strong>volume container</strong> æ˜¯<strong>ä¸“é—¨ä¸ºå…¶ä»–å®¹å™¨æä¾› volume çš„å®¹å™¨</strong>ã€‚å®ƒæä¾›çš„å·<strong>å¯ä»¥æ˜¯ bind mountï¼Œä¹Ÿå¯ä»¥æ˜¯ docker managed volume</strong>ã€‚ä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª volume containerï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/vc-1.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å°†å®¹å™¨å‘½åä¸º<code>vc_data</code>ã€‚è¿™é‡Œæ‰§è¡Œçš„æ˜¯<code>docker create</code>å‘½ä»¤ï¼Œè¿™æ˜¯å› ä¸º <strong>volume container çš„ä½œç”¨åªæ˜¯æä¾›æ•°æ®ï¼Œå®ƒæœ¬èº«ä¸éœ€è¦å¤„äºè¿è¡ŒçŠ¶æ€</strong>ã€‚å®¹å™¨ mount äº†ä¸¤ä¸ª volumeï¼š</p>
<ol>
<li>bing mountï¼Œå­˜æ”¾ web server çš„é™æ€æ–‡ä»¶</li>
<li>docker managed volumeï¼Œå­˜æ”¾ä¸€äº›å®ç”¨å·¥å…·</li>
</ol>
<p>å…¶ä»–å®¹å™¨å¯ä»¥é€šè¿‡<code>--volumes-from</code>ä½¿ç”¨<code>vc_data</code>è¿™ä¸ª volume containerï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/vc-2.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p><strong>volume container çš„ç‰¹ç‚¹</strong>å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¸ bind mount ç›¸æ¯”ï¼Œ<strong>ä¸å¿…ä¸ºæ¯ä¸€ä¸ªå®¹å™¨æŒ‡å®š host pathï¼Œæ‰€æœ‰çš„ path éƒ½åœ¨ volume container ä¸­å®šä¹‰å¥½äº†</strong>ï¼Œå®¹å™¨åªéœ€è¦ä¸ volume container å…³è”ï¼Œè¿™æ ·å°±<strong>å®ç°äº†å®¹å™¨ä¸ host çš„è§£è€¦</strong></li>
<li><strong>ä½¿ç”¨ volume container çš„å®¹å™¨å…¶ mount point æ˜¯ä¸€è‡´çš„ï¼Œæœ‰åˆ©äºé…ç½®çš„è§„èŒƒå’Œæ ‡å‡†åŒ–</strong>ï¼Œä½†ä¹Ÿå¸¦æ¥ä¸€å®šçš„å±€é™ï¼Œä½¿ç”¨æ—¶éœ€è¦ç»¼åˆè€ƒè™‘ã€‚</li>
</ol>
<h4 id="6-2-4-data-packed-volume-container"><a href="#6-2-4-data-packed-volume-container" class="headerlink" title="6.2.4 data-packed volume container"></a>6.2.4 data-packed volume container</h4><p>ä¹‹å‰çš„ä¾‹å­ä¸­ volume container çš„æ•°æ®è¿˜æ˜¯åœ¨ host ä¸Šï¼Œå…¶å®è¿˜å¯ä»¥<strong>å°†æ•°æ®æ‰“åŒ…åˆ°é•œåƒä¸­ï¼Œç„¶åé€šè¿‡ docker managed volume å…±äº«</strong>ã€‚é€šå¸¸æˆ‘ä»¬ç§°è¿™ç§å®¹å™¨ä¸º <strong>data-packed volume container</strong>ã€‚</p>
<p>é¦–å…ˆ<strong>ä½¿ç”¨ä¸‹é¢çš„ Dockerfile æ„å»ºé•œåƒ</strong>ï¼š</p>
<pre><code class="lang-docker">FROM busybox:latest
ADD htdocs /usr/local/apache2/htdocs
VOLUME /usr/local/apache2/htdocs
</code></pre>
<p>ä¹‹å<strong>æ„å»ºæ–°é•œåƒ datapacked</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/datapacked-vc.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>ç”¨æ–°é•œåƒ<strong>åˆ›å»º data-packed volume container</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/datapacked-vc-2.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å› ä¸ºåœ¨ Dockerfile ä¸­å·²ç»ä½¿ç”¨äº†<code>VOLUME</code>æŒ‡ä»¤ï¼Œè¿™é‡Œå°±ä¸éœ€è¦æŒ‡å®š volume çš„ mount point äº†ã€‚<strong>å¯åŠ¨ httpd å®¹å™¨å¹¶ä½¿ç”¨ data-packed volume container</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/datapacked-vc-3.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å®¹å™¨èƒ½å¤Ÿæ­£ç¡®è¯»å– volume ä¸­çš„æ•°æ®ã€‚<strong>data-packed volume container æ˜¯è‡ªåŒ…å«çš„ï¼Œä¸ä¾èµ– host æä¾›æ•°æ®ï¼Œå…·æœ‰å¾ˆå¼ºçš„ç§»æ¤æ€§ï¼Œéå¸¸é€‚åˆåªä½¿ç”¨é™æ€æ•°æ®çš„åœºæ™¯</strong>ï¼Œæ¯”å¦‚åº”ç”¨çš„é…ç½®ä¿¡æ¯ã€web server çš„é™æ€æ–‡ä»¶ç­‰ã€‚</p>
<h3 id="6-3-volume-ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#6-3-volume-ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="6.3 volume ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>6.3 volume ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3><h4 id="6-3-1-volume-å¤‡ä»½"><a href="#6-3-1-volume-å¤‡ä»½" class="headerlink" title="6.3.1 volume å¤‡ä»½"></a>6.3.1 volume å¤‡ä»½</h4><p>å› ä¸º <strong>volume å®é™…ä¸Šæ˜¯ host æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•å’Œæ–‡ä»¶</strong>ï¼Œæ‰€ä»¥ <strong>volume çš„å¤‡ä»½</strong>å®é™…ä¸Šæ˜¯<strong>å¯¹æ–‡ä»¶ç³»ç»Ÿçš„å¤‡ä»½</strong>ã€‚</p>
<p>æ‰€æœ‰çš„æœ¬åœ°é•œåƒéƒ½å­˜åœ¨ host çš„<code>/myregistry</code>ç›®å½•ä¸­ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯<strong>å®šæœŸå¤‡ä»½è¿™ä¸ªç›®å½•</strong>ã€‚</p>
<h4 id="6-3-2-volume-æ¢å¤"><a href="#6-3-2-volume-æ¢å¤" class="headerlink" title="6.3.2 volume æ¢å¤"></a>6.3.2 volume æ¢å¤</h4><p><strong>volume çš„æ¢å¤</strong>ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚æœæ•°æ®æŸåäº†ï¼Œç›´æ¥<strong>ç”¨ä¹‹å‰å¤‡ä»½çš„æ•°æ®æ‹·è´åˆ°</strong><code>/myregistry</code><strong>å°±å¯ä»¥äº†</strong>ã€‚</p>
<h4 id="6-3-3-volume-è¿ç§»"><a href="#6-3-3-volume-è¿ç§»" class="headerlink" title="6.3.3 volume è¿ç§»"></a>6.3.3 volume è¿ç§»</h4><p>å¦‚æœæƒ³<strong>ä½¿ç”¨æ›´æ–°ç‰ˆæœ¬çš„ Registry</strong>ï¼Œå°±æ¶‰åŠåˆ°<strong>æ•°æ®è¿ç§»</strong>ï¼š</p>
<ol>
<li><code>docker stop</code>å½“å‰ Registry å®¹å™¨</li>
<li>å¯åŠ¨æ–°ç‰ˆæœ¬å®¹å™¨å¹¶ <strong>mount åŸæœ‰ volume</strong>ï¼š</li>
</ol>
<pre><code class="lang-bash">docker run -d -p 5000:5000 -v /myregistry:/var/lib/registry registry:latest
</code></pre>
<p>åœ¨å¯ç”¨æ–°å®¹å™¨å‰è¦<strong>ç¡®è®¤æ–°ç‰ˆæœ¬çš„é»˜è®¤æ•°æ®è·¯å¾„æ˜¯å¦å‘ç”Ÿå˜åŒ–</strong>ã€‚</p>
<h4 id="6-3-4-volume-é”€æ¯"><a href="#6-3-4-volume-é”€æ¯" class="headerlink" title="6.3.4 volume é”€æ¯"></a>6.3.4 volume é”€æ¯</h4><p>Docker ä¸ä¼šé”€æ¯ bind mountã€‚<strong>åˆ é™¤ bind mount æ•°æ®çš„å·¥ä½œåªèƒ½ç”± host è´Ÿè´£</strong>ã€‚</p>
<p>å¯¹äº docker managed volumeï¼Œåœ¨æ‰§è¡Œ<code>docker rm</code>åˆ é™¤å®¹å™¨æ—¶å¯ä»¥åŠ ä¸Š<code>-v</code>å‚æ•°ï¼Œ<strong>Docker ä¼šå°†å®¹å™¨ä½¿ç”¨åˆ°çš„ volume ä¸€å¹¶åˆ é™¤ï¼Œä½†å‰ææ˜¯æ²¡æœ‰å®¹å™¨ mount è¯¥ volume</strong>ã€‚</p>
<p>å¦‚æœ<strong>åœ¨åˆ é™¤å®¹å™¨æ—¶æ²¡æœ‰å¸¦</strong><code>-v</code>ï¼Œå°±ä¼šäº§ç”Ÿ<strong>å­¤å„¿ volume</strong>ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/rm-volume-1.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å¯ä»¥ä½¿ç”¨<code>docker volome rm</code>åˆ é™¤è¿™äº›å­¤å„¿ volumeï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2019/02/15/docker-5mins-notes-5/rm-volume-2.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>å¦‚æœæƒ³æ‰¹é‡åˆ é™¤å­¤å„¿ volumeï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="lang-bash">docker volume rm $(docker volume ls -q)
</code></pre>
<h3 id="6-4-å°ç»“"><a href="#6-4-å°ç»“" class="headerlink" title="6.4 å°ç»“"></a>6.4 å°ç»“</h3><p>æœ¬ç« åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>Docker ä¸ºå®¹å™¨æä¾›äº†<strong>ä¸¤ç§å­˜å‚¨èµ„æºï¼šæ•°æ®å±‚å’Œ data volume</strong></li>
<li>æ•°æ®å±‚åŒ…æ‹¬<strong>é•œåƒå±‚</strong>å’Œ<strong>å®¹å™¨å±‚</strong>ï¼Œç”± <strong>storage driver</strong> ç®¡ç†</li>
<li>Data Volume æœ‰ä¸¤ç§ç±»å‹ï¼š<strong>bind mount</strong> å’Œ <strong>docker managed volume</strong></li>
<li><strong>bing mount</strong> å¯ä»¥å®ç°<strong>å®¹å™¨ä¸ host ä¹‹é—´ã€å®¹å™¨ä¸å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®</strong></li>
<li><strong>volume container</strong> æ˜¯ä¸€ç§å…·æœ‰æ›´å¥½ç§»æ¤æ€§çš„<strong>å®¹å™¨é—´æ•°æ®å…±äº«æ–¹æ¡ˆ</strong>ï¼Œç‰¹åˆ«æ˜¯ <strong>data-packed volume container</strong></li>
<li><strong>volume ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>åŒ…æ‹¬<strong>å¤‡ä»½ã€æ¢å¤ã€è¿ç§»å’Œé”€æ¯ Data Volume</strong></li>
</ol>
<div><strong>ğŸš©æ¨èé˜…è¯»</strong>ï¼ˆç”±<a href="https://github.com/huiwang/hexo-recommended-posts">hexoæ–‡ç« æ¨èæ’ä»¶</a>é©±åŠ¨ï¼‰<ul><li><a href="https://abelsu7.top/2019/09/25/micro-service-orchestration-and-container-schedule/">å¾®æœåŠ¡ç¼–æ’ä¸å®¹å™¨è°ƒåº¦</a></li><li><a href="https://abelsu7.top/2019/09/18/micro-service-notes/">å¾®æœåŠ¡å­¦ä¹ èµ„æ–™æ±‡æ€»</a></li><li><a href="https://abelsu7.top/2019/03/19/recent-review/">è¿‘æœŸå¤ä¹ åˆé›†</a></li><li><a href="https://abelsu7.top/2019/03/18/understanding-linux-kernel/">Linux å†…æ ¸ç¬”è®° 1ï¼šç»ªè®º</a></li><li><a href="http://www.hui-wang.info/2018/02/04/%E5%BD%B1%E5%93%8D%E5%8A%9B/">å½±å“åŠ›</a></li><li><a href="http://www.hui-wang.info/2017/11/25/%E6%95%B0%E5%AD%A6%E4%B9%8B%E7%BE%8E%EF%BC%9A%E4%B8%8D%E8%83%BD%E5%86%8D%E5%87%91%E4%BA%86/">æ•°å­¦ä¹‹ç¾ï¼šä¸èƒ½å†å‡‘äº†</a></li></ul></div>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2019-09-01T13:04:11.160Z" itemprop="dateUpdated">2019-09-01 21:04:11</time>
</span><br>


        
        æ–‡ç« å‘å¸ƒåœ°å€ï¼š<a href="/2019/02/15/docker-5mins-notes-5/" target="_blank" rel="external">https://abelsu7.top/2019/02/15/docker-5mins-notes-5/</a>
        
    </div>
    
    <footer>
        <a href="https://abelsu7.top">
            <img src="/img/fong.jpg" alt="Abel Su">
            Abel Su
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/å®¹å™¨/">å®¹å™¨</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è¯»ä¹¦/">è¯»ä¹¦</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&title=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&title=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&source=
Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†


                
             ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/02/16/centos7-install-mysql57/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">CentOS 7 å®‰è£… MySQL 5.7</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/02/13/docker-5mins-notes-4/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">5 åˆ†é’Ÿ Docker ç¬”è®° 4ï¼šç½‘ç»œ</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment v" id="vcomments"></div>
    <!-- <div class="comment" id="comment"></div> -->
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
    <!-- <script src="//t1.aixinxi.net/o_1c3n4pim01nl3jg91b6l1kjtkvsa.js"></script> -->
    <!-- <script src="/js/Valine.min.js"></script> -->
    <!-- <script src="https://cdnjs.cat.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <script src="//cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            av: AV,
            // el: '#comments',
            el: '#vcomments',
            emoticon_url: 'https://abelsu7.top/alu', //è¡¨æƒ…å›¾ç‰‡ç½‘å€
            emoticon_list: ["èµä¸€ä¸ª.png","åç­‰.png","é•¿è‰.png","é˜´æš—.png","é‚ªæ¶.png","å°çœ¼ç›.png","æƒ³ä¸€æƒ³.png","çŒ®é»„ç“œ.png","çŒ®èŠ±.png","å–œæè€Œæ³£.png","æ— è¯­.png","æ— æ‰€è°“.png","æ— å¥ˆ.png","æŠ•é™.png","æ·±æ€.png","æœŸå¾….png","ç‹‚æ±—.png","èœ¡çƒ›.png","çœ‹ä¸è§.png","æƒŠå–œ.png","å‡»æŒ.png","æ¬¢å‘¼.png","å¾—æ„.png","ä¸å‡ºæ‰€æ–™.png","è§‚å¯Ÿ.png"],//è¡¨æƒ…å›¾ç‰‡æ–‡ä»¶å
            // notify: 'false' == 'false',
            // verify: 'false' == 'false',
            // notify: 'false',
            // verify: 'false',
            notify: false,
            verify: false,
            appId: "aP2YQo0mfrRpTLrLb1bchILb-gzGzoHsz",
            appKey: "Cp82umQdGScRRFUYLmob6yyK",
            avatar: "mp",
            placeholder: "Write a comment",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        æ„Ÿè°¢æ”¯æŒï¼
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item switch">åˆ‡æ¢</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


            <p>
                
                    <span>
                        <a href="/atom.xml" target="_blank" class="rss" title="rss">
                            <i class="icon icon-lg icon-rss"></i>
                        </a>
                    </span>
                    
                        <span>
                            åšå®¢å†…å®¹éµå¾ª <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a>
                        </span>
            </p>
    </div>
    <div class="bottom">
        <p>
            <span>
                Abel Su &copy;
                    
                        2018 -
                            
                                2019
            </span>
            <span>
                
                    <a href="http://beian.miit.gov.cn/" target="_blank">
                        ç²¤ICPå¤‡16068788å·-2
                    </a>
                    <br>
                    
                        Power by
                        <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
                        <a href="https://github.com/abelsu7/hexo-theme-indigo-plus" target="_blank">indigo plus</a>
                        <p>Hosted by <a href="https://pages.github.com" target="_blank" style="font-weight: bold">Github Pages</a></p>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>
<a href="javascript:;" id="gobottom" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-comments"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&title=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&title=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&source=
Bind Mount ä¸ Data Volumeã€å…±äº«æ•°æ®ã€Volume ç”Ÿå‘½å‘¨æœŸç®¡ç†


                
             ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š5 åˆ†é’Ÿ Docker ç¬”è®° 5ï¼šå­˜å‚¨ã€‹ â€” Keep Coding&url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2019/02/15/docker-5mins-notes-5/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACHUlEQVR42u3aO3LDMAwFQN//0k6bRsp7gpQZkcvKI+u3LmCAwOcTr2+wjs7/feTo2/Pjty0MDIzXMpKXS45ce8rRt/m7YWBg7MM4evD55/bMyd3+eGcMDAyM03POg28e0DEwMDCeY+TpY1vcYmBgYEwCYl7QTgL3I7U4BgbGCxn5Ztn/f36kv4GBgfEqxrdc58F30pL8DhYGBsbajDzAtU3HNk5O2BgYGPsw8tLxPLBeG91IjhfbbRgYGIsyrgXH9iXaAY58LAMDA2NVRtuYvDYkkSR8kzQRAwNjbUbeaMy329pUsihTk78HDAyMRRlFFlkG7nbYq006MTAw9mS0idq1Ma88fczvgIGBsSqjBczL0bYoTX4mDAyMfRjn4e+JAJoUukkQx8DA2IGRX5CH0XtbCFEPFgMDY1FGEgrzIYx72fl+GgYGxtqMySBXncANks6oiMXAwFia0W6KTRqQbdkcNVwxMDCWZlybVWi379sGZ75JNxq5wMDAeBVjUqy2AXqy6VbPjGBgYCzHuNYkyEvNScEcbc9hYGBsw5jkWvlV7ZnRszAwMBZlfMvVjke0rdB2e67IWzEwMF7LmAS7fHO/ffykgYqBgbEq41qQbfFPX4WBgbED44kN/XY4bFT6YmBgYFx6uaj1WP4ENwdcDAyMzRiTlmdbcx+2MDEwMJZmJEXsXYDzO+cjsxgYGPsw2rzrCeq8hMbAwFiU8QOAqEupnuqKSQAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/prism.min.js?v=1.7.2"></script>
<script src="/js/prism-vim.min.js?v=1.7.2"></script>
</body>
</html>
