<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?c61262c25ca5d4ed66df331a31b5bf49"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="cc3c_UncRv21aEZwqejVxKpUMR7h9ldNUTeYjawUS-g">
    
    
    <meta name="baidu-site-verification" content="HnoV7q61W5">
    
    
    
    <title>HTTP 笔记 1：Web 基础及简单的 HTTP 协议 | Keep Coding | 苏易北</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="读书,HTTP,TCP">
    <meta name="description" content="《图解HTTP》">
<meta name="keywords" content="读书,HTTP,TCP">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP 笔记 1：Web 基础及简单的 HTTP 协议">
<meta property="og:url" content="https://abelsu7.top/2018/10/18/http-notes-part-1/index.html">
<meta property="og:site_name" content="Keep Coding">
<meta property="og:description" content="《图解HTTP》">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/cover.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199874587.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199874720.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199874866.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199875086.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199875285.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199875493.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199875663.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199875955.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199876609.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199876836.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199876984.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199877498.jpg">
<meta property="og:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/199878621.jpg">
<meta property="og:updated_time" content="2019-09-01T13:04:11.334Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTTP 笔记 1：Web 基础及简单的 HTTP 协议">
<meta name="twitter:description" content="《图解HTTP》">
<meta name="twitter:image" content="https://abelsu7.top/2018/10/18/http-notes-part-1/cover.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="Keep Coding" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <link rel="stylesheet" href="/css/prism/prism-tomorrow-night.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-list-ul"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/back_blue.png)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/fong.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Abel Su</h5>
          <a href="mailto:abelsu7@gmail.com" title="abelsu7@gmail.com" class="mail">abelsu7@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top"  >
                <i class="icon icon-lg icon-sticky-note"></i>
                笔记
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/abelsu7"  >
                <i class="icon icon-lg icon-github"></i>
                代码
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friends/"  >
                <i class="icon icon-lg icon-user"></i>
                友链
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/bookmarks/"  >
                <i class="icon icon-lg icon-bookmark"></i>
                收藏
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/books/"  >
                <i class="icon icon-lg icon-book"></i>
                读书
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/movies/"  >
                <i class="icon icon-lg icon-film"></i>
                影视
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/games/"  >
                <i class="icon icon-lg icon-gamepad"></i>
                游戏
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://notes.abelsu7.top/#/links/wechat"  >
                <i class="icon icon-lg icon-wechat"></i>
                微信
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/2018/09/21/how-to-learn-coding/"  >
                <i class="icon icon-lg icon-code"></i>
                学习
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/wiki/"  >
                <i class="icon icon-lg icon-sort-alpha-asc"></i>
                速查
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-info-circle"></i>
                关于
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">HTTP 笔记 1：Web 基础及简单的 HTTP 协议</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">HTTP 笔记 1：Web 基础及简单的 HTTP 协议</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-10-18T15:10:36.000Z" itemprop="datePublished" class="page-time">
  2018-10-18
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/计算机网络/">计算机网络</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#目录"><span class="post-toc-text">目录</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第-1-章-了解-Web-及网络基础"><span class="post-toc-text">第 1 章 了解 Web 及网络基础</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-使用-HTTP-协议访问-Web"><span class="post-toc-text">1.1 使用 HTTP 协议访问 Web</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-HTTP-的诞生"><span class="post-toc-text">1.2 HTTP 的诞生</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-3-网络基础-TCP-IP"><span class="post-toc-text">1.3 网络基础 TCP/IP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-1-TCP-IP-协议族"><span class="post-toc-text">1.3.1 TCP/IP 协议族</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-2-TCP-IP-的分层管理"><span class="post-toc-text">1.3.2 TCP/IP 的分层管理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-3-TCP-IP-通信传输流"><span class="post-toc-text">1.3.3 TCP/IP 通信传输流</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-4-与-HTTP-关系密切的协议-IP、TCP-和-DNS"><span class="post-toc-text">1.4 与 HTTP 关系密切的协议 : IP、TCP 和 DNS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-4-1-负责传输的-IP-协议"><span class="post-toc-text">1.4.1 负责传输的 IP 协议</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-4-2-确保可靠性的-TCP-协议"><span class="post-toc-text">1.4.2 确保可靠性的 TCP 协议</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-5-负责域名解析的-DNS-服务"><span class="post-toc-text">1.5 负责域名解析的 DNS 服务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-6-各种协议与-HTTP-协议的关系"><span class="post-toc-text">1.6 各种协议与 HTTP 协议的关系</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-7-URI-和-URL"><span class="post-toc-text">1.7 URI 和 URL</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-7-1-统一资源标识符"><span class="post-toc-text">1.7.1 统一资源标识符</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-7-2-URI-格式"><span class="post-toc-text">1.7.2 URI 格式</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第-2-章-简单的-HTTP-协议"><span class="post-toc-text">第 2 章 简单的 HTTP 协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-HTTP-协议用于客户端和服务器端之间的通信"><span class="post-toc-text">2.1 HTTP 协议用于客户端和服务器端之间的通信</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-通过请求和相应的交换达成通信"><span class="post-toc-text">2.2 通过请求和相应的交换达成通信</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-HTTP-是不保存状态的协议"><span class="post-toc-text">2.3 HTTP 是不保存状态的协议</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-请求-URI-定位资源"><span class="post-toc-text">2.4 请求 URI 定位资源</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-告知服务器意图的-HTTP-方法"><span class="post-toc-text">2.5 告知服务器意图的 HTTP 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-6-使用方法下达命令"><span class="post-toc-text">2.6 使用方法下达命令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-7-持久连接节省通信量"><span class="post-toc-text">2.7 持久连接节省通信量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-7-1-持久连接"><span class="post-toc-text">2.7.1 持久连接</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-7-2-管线化"><span class="post-toc-text">2.7.2 管线化</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-8-使用-Cookie-的状态管理"><span class="post-toc-text">2.8 使用 Cookie 的状态管理</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-http-notes-part-1"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">HTTP 笔记 1：Web 基础及简单的 HTTP 协议</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-10-18 23:10:36" datetime="2018-10-18T15:10:36.000Z"  itemprop="datePublished">2018-10-18</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/计算机网络/">计算机网络</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/cover.jpg" alt="《图解HTTP》" title>
                </div>
                <div class="image-caption">《图解HTTP》</div>
            </figure>
<a id="more"></a>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#目录">目录</a></li>
<li><a href="#第-1-章-了解-Web-及网络基础">第 1 章 了解 Web 及网络基础</a><ul>
<li><a href="#1-1-使用-HTTP-协议访问-Web">1.1 使用 HTTP 协议访问 Web</a></li>
<li><a href="#1-2-HTTP-的诞生">1.2 HTTP 的诞生</a></li>
<li><a href="#1-3-网络基础-TCP-IP">1.3 网络基础 TCP/IP</a><ul>
<li><a href="#1-3-1-TCP-IP-协议族">1.3.1 TCP/IP 协议族</a></li>
<li><a href="#1-3-2-TCP-IP-的分层管理">1.3.2 TCP/IP 的分层管理</a></li>
<li><a href="#1-3-3-TCP-IP-通信传输流">1.3.3 TCP/IP 通信传输流</a></li>
</ul>
</li>
<li><a href="#1-4-与-HTTP-关系密切的协议-IP、TCP-和-DNS">1.4 与 HTTP 关系密切的协议 : IP、TCP 和 DNS</a><ul>
<li><a href="#1-4-1-负责传输的-IP-协议">1.4.1 负责传输的 IP 协议</a></li>
<li><a href="#1-4-2-确保可靠性的-TCP-协议">1.4.2 确保可靠性的 TCP 协议</a></li>
</ul>
</li>
<li><a href="#1-5-负责域名解析的-DNS-服务">1.5 负责域名解析的 DNS 服务</a></li>
<li><a href="#1-6-各种协议与-HTTP-协议的关系">1.6 各种协议与 HTTP 协议的关系</a></li>
<li><a href="#1-7-URI-和-URL">1.7 URI 和 URL</a><ul>
<li><a href="#1-7-1-统一资源标识符">1.7.1 统一资源标识符</a></li>
<li><a href="#1-7-2-URI-格式">1.7.2 URI 格式</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#第-2-章-简单的-HTTP-协议">第 2 章 简单的 HTTP 协议</a><ul>
<li><a href="#2-1-HTTP-协议用于客户端和服务器端之间的通信">2.1 HTTP 协议用于客户端和服务器端之间的通信</a></li>
<li><a href="#2-2-通过请求和相应的交换达成通信">2.2 通过请求和相应的交换达成通信</a></li>
<li><a href="#2-3-HTTP-是不保存状态的协议">2.3 HTTP 是不保存状态的协议</a></li>
<li><a href="#2-4-请求-URI-定位资源">2.4 请求 URI 定位资源</a></li>
<li><a href="#2-5-告知服务器意图的-HTTP-方法">2.5 告知服务器意图的 HTTP 方法</a></li>
<li><a href="#2-6-使用方法下达命令">2.6 使用方法下达命令</a></li>
<li><a href="#2-7-持久连接节省通信量">2.7 持久连接节省通信量</a><ul>
<li><a href="#2-7-1-持久连接">2.7.1 持久连接</a></li>
<li><a href="#2-7-2-管线化">2.7.2 管线化</a></li>
</ul>
</li>
<li><a href="#2-8-使用-Cookie-的状态管理">2.8 使用 Cookie 的状态管理</a></li>
</ul>
</li>
</ul>
<h2 id="第-1-章-了解-Web-及网络基础"><a href="#第-1-章-了解-Web-及网络基础" class="headerlink" title="第 1 章 了解 Web 及网络基础"></a>第 1 章 了解 Web 及网络基础</h2><h3 id="1-1-使用-HTTP-协议访问-Web"><a href="#1-1-使用-HTTP-协议访问-Web" class="headerlink" title="1.1 使用 HTTP 协议访问 Web"></a>1.1 使用 HTTP 协议访问 Web</h3><p>Web 使用一种名为<strong>HTTP</strong>（HyperText Transfer Protocol，超文本传输协议 ）的协议作为规范，完成从客户端到服务器端等一系列运作流程。而协议是指规则的约定。可以说，Web 是建立在 HTTP 协议上通信的。</p>
<h3 id="1-2-HTTP-的诞生"><a href="#1-2-HTTP-的诞生" class="headerlink" title="1.2 HTTP 的诞生"></a>1.2 HTTP 的诞生</h3><ul>
<li>HTTP/0.9</li>
</ul>
<blockquote>
<p>HTTP 于 1990 年问世。那时的 HTTP 并没有作为正式的标准被建立。现在的 HTTP 其实含有 HTTP1.0 之前版本的意思，因此被称为 HTTP/0.9。</p>
</blockquote>
<ul>
<li>HTTP/1.0</li>
</ul>
<blockquote>
<p>HTTP 正式作为标准被公布是在 1996 年的 5 月，版本被命名为 HTTP/1.0，并记载于 RFC1945。虽说是初期标准，但该协议标准至今仍被广泛使用在服务器端。</p>
</blockquote>
<ul>
<li><a href="http://www.ietf.org/rfc/rfc2616.txt" target="_blank" rel="noopener">RFC1945 - Hypertext Transfer Protocol — HTTP/1.0</a></li>
<li>HTTP/1.1</li>
</ul>
<blockquote>
<p>1997 年 1 月公布的 HTTP/1.1 是<strong>目前主流的 HTTP 协议版本</strong>。当初的标准是 RFC2068，之后发布的修订版 <strong>RFC2616</strong> 就是当前的最新版本。</p>
</blockquote>
<ul>
<li><a href="http://www.ietf.org/rfc/rfc2616.txt" target="_blank" rel="noopener">RFC2616 - Hypertext Transfer Protocol — HTTP/1.1</a></li>
</ul>
<h3 id="1-3-网络基础-TCP-IP"><a href="#1-3-网络基础-TCP-IP" class="headerlink" title="1.3 网络基础 TCP/IP"></a>1.3 网络基础 TCP/IP</h3><h4 id="1-3-1-TCP-IP-协议族"><a href="#1-3-1-TCP-IP-协议族" class="headerlink" title="1.3.1 TCP/IP 协议族"></a>1.3.1 TCP/IP 协议族</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199874587.jpg" alt="TCP/IP是互联网相关的各类协议族的总称" title>
                </div>
                <div class="image-caption">TCP/IP是互联网相关的各类协议族的总称</div>
            </figure>
<blockquote>
<p>像这样把<strong>与互联网相关联的协议</strong>集合起来<strong>总称为 TCP/IP</strong>。也有说法认为，TCP/IP 是指 TCP 和 IP 这两种协议。还有一种说法认为，TCP/ IP 是在 IP 协议的通信过程中，<strong>使用到的协议族的统称</strong>。</p>
</blockquote>
<h4 id="1-3-2-TCP-IP-的分层管理"><a href="#1-3-2-TCP-IP-的分层管理" class="headerlink" title="1.3.2 TCP/IP 的分层管理"></a>1.3.2 TCP/IP 的分层管理</h4><p>TCP/IP 协议族里重要的一点就是分层。TCP/IP 协议族按层次分别分为以下 4 层：<strong>应用层</strong>、<strong>传输层</strong>、<strong>网络层</strong>和<strong>数据链路层</strong>。</p>
<blockquote>
<p>把 TCP/IP 层次化是有好处的。比如，如果互联网只由一个协议统筹，某个地方需要改变设计时，就必须把所有部分整体替换掉。而分层之后只需把变动的层替换掉即可。把各层之间的接口部分规划好之后，每个层次内部的设计就能够自由改动了。</p>
</blockquote>
<ul>
<li><strong>应用层</strong>：决定了向用户提供应用服务时通信的活动。</li>
</ul>
<blockquote>
<p>TCP/IP 协议族内预存了各类通用的应用服务。比如，<strong>FTP</strong>（File Transfer Protocol，文件传输协议）和 <strong>DNS</strong>（Domain Name System，域名系统）服务就是其中两类。</p>
<p><strong>HTTP</strong> 协议也处于该层。</p>
</blockquote>
<ul>
<li><strong>传输层</strong>：对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。</li>
</ul>
<blockquote>
<p>在传输层有两个性质不同的协议：<strong>TCP</strong>（Transmission Control Protocol，传输控制协议）和 <strong>UDP</strong>（User Data Protocol，用户数据报协议）。</p>
</blockquote>
<ul>
<li><strong>网络层</strong>（又名网络互连层）：用来处理在网络上流动的数据包。</li>
</ul>
<blockquote>
<p>数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。</p>
<p>数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。</p>
</blockquote>
<ul>
<li><strong>链路层</strong>（又名数据链路层、网络接口层）：用来处理连接网络的硬件部分。</li>
</ul>
<blockquote>
<p>包括控制操作系统、硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等物理可见部分（还包括连接器等一切传输媒介）。</p>
<p><strong>硬件上的范畴均在链路层的作用范围之内</strong>。</p>
</blockquote>
<h4 id="1-3-3-TCP-IP-通信传输流"><a href="#1-3-3-TCP-IP-通信传输流" class="headerlink" title="1.3.3 TCP/IP 通信传输流"></a>1.3.3 TCP/IP 通信传输流</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199874720.jpg" alt="TCP/IP通信传输流" title>
                </div>
                <div class="image-caption">TCP/IP通信传输流</div>
            </figure>
<p>发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。这种把数据信息包装起来的做法称为<strong>封装</strong>（encapsulate）。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199874866.jpg" alt="HTTP协议请求中的封装过程" title>
                </div>
                <div class="image-caption">HTTP协议请求中的封装过程</div>
            </figure>
<h3 id="1-4-与-HTTP-关系密切的协议-IP、TCP-和-DNS"><a href="#1-4-与-HTTP-关系密切的协议-IP、TCP-和-DNS" class="headerlink" title="1.4 与 HTTP 关系密切的协议 : IP、TCP 和 DNS"></a>1.4 与 HTTP 关系密切的协议 : IP、TCP 和 DNS</h3><h4 id="1-4-1-负责传输的-IP-协议"><a href="#1-4-1-负责传输的-IP-协议" class="headerlink" title="1.4.1 负责传输的 IP 协议"></a>1.4.1 负责传输的 IP 协议</h4><ul>
<li>按层次分，IP（Internet Protocol）网际协议位于<strong>网络层</strong></li>
<li>几乎所有使用网络的系统都会用到 IP 协议</li>
<li>TCP/IP 协议族中的 IP 指的就是网际协议</li>
</ul>
<blockquote>
<p>IP 协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 <strong>IP 地址</strong>和 <strong>MAC 地址</strong>（Media Access Control Address）。</p>
<p><strong>IP 地址</strong>指明了<strong>节点被分配到的地址</strong>，<strong>MAC 地址</strong>是指<strong>网卡所属的固定地址</strong>。IP 地址可以和 MAC 地址进行配对。IP 地址可变换，但 MAC 地址基本上不会更改。</p>
</blockquote>
<p><strong>使用 ARP 协议凭借 MAC 地址进行通信</strong></p>
<p>IP 间的通信依赖 MAC 地址。在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。这时，会采用 <strong>ARP 协议</strong>（Address Resolution Protocol）。ARP 是一种用以<strong>解析地址</strong>的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199875086.jpg" alt="ARP协议解析过程" title>
                </div>
                <div class="image-caption">ARP协议解析过程</div>
            </figure>
<h4 id="1-4-2-确保可靠性的-TCP-协议"><a href="#1-4-2-确保可靠性的-TCP-协议" class="headerlink" title="1.4.2 确保可靠性的 TCP 协议"></a>1.4.2 确保可靠性的 TCP 协议</h4><ul>
<li>按层次分，TCP 位于<strong>传输层</strong>，提供可靠的字节流服务</li>
</ul>
<blockquote>
<p>所谓的<strong>字节流服务</strong>（Byte Stream Service）是指，为了方便传输，将大块数据分割成以<strong>报文段</strong>（segment）为单位的数据包进行管理。</p>
<p>而可靠的传输服务是指，能够把数据准确可靠地传给对方。</p>
<p>一言以蔽之，TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议<strong>能够确认数据最终是否送达到对方</strong>。</p>
</blockquote>
<p><strong>确保数据能到达目标</strong></p>
<ul>
<li>TCP 协议采用了<strong>三次握手</strong>（three-way handshaking）策略</li>
<li>握手过程中使用了 TCP 的标志（flag） —— <strong>SYN</strong>（synchronize） 和 <strong>ACK</strong>（acknowledgement）</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199875285.jpg" alt="TCP协议的三次握手" title>
                </div>
                <div class="image-caption">TCP协议的三次握手</div>
            </figure>
<blockquote>
<p>发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。最后，发送端再回传一个带 ACK 标志的数据包，代表“握手”结束。</p>
<p>若在握手过程中某个阶段莫名中断，TCP 协议会<strong>再次以相同的顺序发送相同的数据包</strong>。</p>
</blockquote>
<h3 id="1-5-负责域名解析的-DNS-服务"><a href="#1-5-负责域名解析的-DNS-服务" class="headerlink" title="1.5 负责域名解析的 DNS 服务"></a>1.5 负责域名解析的 DNS 服务</h3><ul>
<li>DNS（Domain Name System）服务和 HTTP 协议一样位于<strong>应用层</strong></li>
<li>提供<strong>域名到 IP 地址</strong>之间的<strong>解析服务</strong></li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199875493.jpg" alt="DNS解析过程" title>
                </div>
                <div class="image-caption">DNS解析过程</div>
            </figure>
<h3 id="1-6-各种协议与-HTTP-协议的关系"><a href="#1-6-各种协议与-HTTP-协议的关系" class="headerlink" title="1.6 各种协议与 HTTP 协议的关系"></a>1.6 各种协议与 HTTP 协议的关系</h3><ul>
<li>DNS 服务：解析域名至对应的IP地址</li>
<li>HTTP 协议：生成针对目标Web服务器的HTTP请求报文</li>
<li>TCP 协议：将请求报文按序号分割成多个报文段</li>
<li>IP 协议：搜索对方的地址，一边中转一边传送</li>
<li>TCP 协议：按序号以原来的顺序重组请求报文</li>
<li>请求的处理结果也同样利用TCP/IP协议向用户进行回传</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199875663.jpg" alt="各种协议与HTTP协议的关系" title>
                </div>
                <div class="image-caption">各种协议与HTTP协议的关系</div>
            </figure>
<h3 id="1-7-URI-和-URL"><a href="#1-7-URI-和-URL" class="headerlink" title="1.7 URI 和 URL"></a>1.7 URI 和 URL</h3><ul>
<li>URI（Uniform Resource Identifier）：统一资源标识符</li>
<li>URL（Uniform Resource Locator）：统一资源定位符</li>
</ul>
<h4 id="1-7-1-统一资源标识符"><a href="#1-7-1-统一资源标识符" class="headerlink" title="1.7.1 统一资源标识符"></a>1.7.1 统一资源标识符</h4><p>URI 是 Uniform Resource Identifier 的缩写，RFC2396 分别对这 3 个单词进行了如下定义。</p>
<ul>
<li>Uniform</li>
</ul>
<blockquote>
<p>规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式。</p>
<p>另外，加入新增的协议方案（如 http: 或 ftp:）也更容易。</p>
</blockquote>
<ul>
<li>Resource</li>
</ul>
<blockquote>
<p>资源的定义是“可标识的任何东西”。除了文档文件、图像或服务（例如当天的天气预报）等能够区别于其他类型的，全都可作为资源。</p>
<p>另外，资源不仅可以是单一的，也可以是多数的集合体。</p>
</blockquote>
<ul>
<li>Identifier</li>
</ul>
<blockquote>
<p>表示可标识的对象。也称为标识符。</p>
</blockquote>
<p>综上所述，<strong>URI</strong> 就是<strong>由某个协议方案表示的资源的定位标识符</strong>。<strong>协议方案</strong>是指<strong>访问资源所使用的协议类型名称</strong>。</p>
<p>“RFC3986：统一资源标识符（URI）通用语法”中列举了几种 URI 例子，如下所示。</p>
<pre><code class="lang-http">ftp://ftp.is.co.za/rfc/rfc1808.txt
http://www.ietf.org/rfc/rfc2396.txt
ldap://[2001:db8::7]/c=GB?objectClass?one
mailto:John.Doe@example.com
news:comp.infosystems.www.servers.unix
tel:+1-816-555-1212
telnet://192.0.2.16:80/
urn:oasis:names:specification:docbook:dtd:xml:4.1.2
</code></pre>
<h4 id="1-7-2-URI-格式"><a href="#1-7-2-URI-格式" class="headerlink" title="1.7.2 URI 格式"></a>1.7.2 URI 格式</h4><p>表示指定的 URI，要使用涵盖全部必要信息的绝对 URI、绝对 URL 以及相对 URL。相对 URL，是指从浏览器中基本 URI 处指定的 URL，形如 <code>/image/logo.gif</code>。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199875955.jpg" alt="绝对URI的格式" title>
                </div>
                <div class="image-caption">绝对URI的格式</div>
            </figure>
<ul>
<li>登陆信息（认证）</li>
</ul>
<blockquote>
<p>指定用户名和密码作为从服务器端获取资源时必要的登录信息（身份认证）。此项是<strong>可选</strong>项。</p>
</blockquote>
<ul>
<li>服务器地址</li>
</ul>
<blockquote>
<p>使用绝对 URI 必须指定待访问的服务器地址。地址可以是类似 hackr.jp 这种 DNS 可解析的<strong>域名</strong>，或是 192.168.1.1 这类 <strong>IPv4</strong> 地址 名，还可以是 [0:0:0:0:0:0:0:1] 这样用方括号括起来的 <strong>IPv6</strong> 地址名。</p>
</blockquote>
<ul>
<li>服务器端口号</li>
</ul>
<blockquote>
<p>指定服务器连接的网络端口号。此项也是<strong>可选</strong>项，若用户省略则自动使用默认端口号。</p>
</blockquote>
<ul>
<li>带层次的文件路径</li>
</ul>
<blockquote>
<p>指定服务器上的文件路径来定位特指的资源。这与 UNIX 系统的文件目录结构相似。</p>
</blockquote>
<ul>
<li>查询字符串</li>
</ul>
<blockquote>
<p>针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数。此项<strong>可选</strong>。</p>
</blockquote>
<ul>
<li>片段标识符</li>
</ul>
<blockquote>
<p>使用片段标识符通常可标记出已获取资源中的子资源（文档内的某个位置）。但在 RFC 中并没有明确规定其使用方法。该项也为<strong>可选</strong>项。</p>
</blockquote>
<h2 id="第-2-章-简单的-HTTP-协议"><a href="#第-2-章-简单的-HTTP-协议" class="headerlink" title="第 2 章 简单的 HTTP 协议"></a>第 2 章 简单的 HTTP 协议</h2><h3 id="2-1-HTTP-协议用于客户端和服务器端之间的通信"><a href="#2-1-HTTP-协议用于客户端和服务器端之间的通信" class="headerlink" title="2.1 HTTP 协议用于客户端和服务器端之间的通信"></a>2.1 HTTP 协议用于客户端和服务器端之间的通信</h3><p>请求访问文本或图像等资源的一端称为客户端，而提供资源响应的一端称为服务器端。</p>
<p>在两台计算机之间使用 HTTP 协议通信时，在一条通信线路上必定有一端是客户端，另一端则是服务器端。</p>
<p>有时候，按实际情况，两台计算机作为客户端和服务器端的角色有可能会互换。但就仅从一条通信路线来说，服务器端和客户端的角色是确定的，而用 HTTP 协议能够明确区分哪端是客户端，哪端是服务器端。</p>
<h3 id="2-2-通过请求和相应的交换达成通信"><a href="#2-2-通过请求和相应的交换达成通信" class="headerlink" title="2.2 通过请求和相应的交换达成通信"></a>2.2 通过请求和相应的交换达成通信</h3><p>HTTP 协议规定，请求从客户端发出，最后服务器端响应该请求并返回。换句话说，肯定是先从客户端开始建立通信的，服务器端在没有接收到请求之前不会发送响应。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199876609.jpg" alt="简单的HTTP请求示例" title>
                </div>
                <div class="image-caption">简单的HTTP请求示例</div>
            </figure>
<p>下面是从客户端发送给某个 HTTP 服务器端的请求报文中的内容。</p>
<pre><code class="lang-http">GET /index.htm HTTP/1.1
Host: hackr.jp
</code></pre>
<ul>
<li>GET 表示请求访问服务器的类型，称为方法（method）</li>
<li><code>/index.htm</code>指明了请求访问的资源对象，称为请求URI（request-URI）</li>
<li>HTTP/1.1 表示HTTP的版本号，用来提示客户端使用的 HTTP 协议功能</li>
</ul>
<blockquote>
<p>综合来看，这段请求内容的意思是：请求访问某台 HTTP 服务器上的 /index.htm 页面资源。</p>
</blockquote>
<p><strong>请求报文</strong>是由<strong>请求方法</strong>、<strong>请求 URI</strong>、<strong>协议版本</strong>、<strong>可选的请求首部字段</strong>和<strong>内容实体</strong>构成的。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199876836.jpg" alt="请求报文的构成" title>
                </div>
                <div class="image-caption">请求报文的构成</div>
            </figure>
<p>接收到请求的服务器，会将请求内容的处理结果以响应的形式返回。</p>
<pre><code class="lang-http">HTTP/1.1 200 OK
Date: Tue, 10 Jul 2012 06:50:15 GMT
Content-Length: 362
Content-Type: text/html

&lt;html&gt;
……
</code></pre>
<ul>
<li>HTTP/1.1 表示服务器对应的HTTP版本</li>
<li>200 OK 表示请求的处理结果的状态码（status code）和原因短语（reason-phrase）</li>
<li>Date 是首部字段（header filed）内的一个属性</li>
<li>之后的内容称为资源实体的主体（entity body）</li>
</ul>
<p><strong>响应报文</strong>基本上由<strong>协议版本</strong>、<strong>状态码</strong>、用以解释状态码的<strong>原因短语</strong>、可选的<strong>响应首部字段</strong>以及<strong>实体主体</strong>构成。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199876984.jpg" alt="响应报文的构成" title>
                </div>
                <div class="image-caption">响应报文的构成</div>
            </figure>
<h3 id="2-3-HTTP-是不保存状态的协议"><a href="#2-3-HTTP-是不保存状态的协议" class="headerlink" title="2.3 HTTP 是不保存状态的协议"></a>2.3 HTTP 是不保存状态的协议</h3><p>HTTP 是一种不保存状态，即<strong>无状态（stateless）协议</strong>。HTTP 协议自身<strong>不对请求和响应之间的通信状态进行保存</strong>。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都<strong>不做持久化处理</strong>。</p>
<blockquote>
<p>HTTP/1.1 虽然是无状态协议，但为了实现期望的保持状态功能，于是引入了 Cookie 技术。有了 Cookie 再用 HTTP 协议通信，就可以管理状态了。</p>
</blockquote>
<h3 id="2-4-请求-URI-定位资源"><a href="#2-4-请求-URI-定位资源" class="headerlink" title="2.4 请求 URI 定位资源"></a>2.4 请求 URI 定位资源</h3><p>HTTP 协议使用 URI 定位互联网上的资源。正是因为 URI 的特定功能，在互联网上任意位置的资源都能访问到。</p>
<p>当客户端请求访问资源而发送请求时，URI 需要将作为请求报文中的请求 URI 包含在内。指定请求 URI 的方式有很多。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199877498.jpg" alt="URI为完整的请求URI" title>
                </div>
                <div class="image-caption">URI为完整的请求URI</div>
            </figure>
<p>除此之外，如果不是访问特定资源而是对服务器本身发起请求，可以用一个 <code>*</code> 来代替请求 URI。下面这个例子是查询 HTTP 服务器端支持 的 HTTP 方法种类。</p>
<pre><code class="lang-http">OPTIONS * HTTP/1.1
</code></pre>
<h3 id="2-5-告知服务器意图的-HTTP-方法"><a href="#2-5-告知服务器意图的-HTTP-方法" class="headerlink" title="2.5 告知服务器意图的 HTTP 方法"></a>2.5 告知服务器意图的 HTTP 方法</h3><p>下面介绍 HTTP/1.1 中可使用的方法。</p>
<ul>
<li>GET：获取资源</li>
</ul>
<blockquote>
<p>GET 方法用来请求访问已被 URI 识别的资源，指定的资源经服务器端解析后返回响应内容。</p>
</blockquote>
<ul>
<li>POST：传输实体主体</li>
</ul>
<blockquote>
<p>虽然用 GET 方法也可以传输实体的主体，但一般不用 GET 方法进行传输，而是用 POST 方法。</p>
<p>虽说 POST 的功能与 GET 很相似，但 POST 的主要目的并不是获取响应的主体内容。</p>
</blockquote>
<ul>
<li>PUT：传输文件</li>
</ul>
<blockquote>
<p>PUT 方法用来传输文件。就像 FTP 协议的文件上传一样，要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。</p>
<p>但是，鉴于 HTTP/1.1 的 PUT 方法自身不带验证机制，任何人都可以上传文件 , 存在安全性问题，因此一般的 Web 网站不使用该方法。</p>
<p>若配合 Web 应用程序的验证机制，或架构设计采用 REST（REpresentational State Transfer，表征状态转移）标准的同类 Web 网站，就可能会开放使用 PUT 方法。</p>
</blockquote>
<ul>
<li>HEAD：获得报文首部</li>
</ul>
<blockquote>
<p>HEAD 方法和 GET 方法一样，只是不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等。</p>
</blockquote>
<ul>
<li>DELETE：删除文件</li>
</ul>
<blockquote>
<p>DELETE 方法用来删除文件，是与 PUT 相反的方法。DELETE 方法按请求 URI 删除指定的资源。</p>
<p>但是，HTTP/1.1 的 DELETE 方法本身和 PUT 方法一样不带验证机制，所以一般的 Web 网站也不使用 DELETE 方法。当配合 Web 应用程序的验证机制，或遵守 REST 标准时还是有可能会开放使用的。</p>
</blockquote>
<ul>
<li>OPTIONS：询问支持的方法</li>
</ul>
<blockquote>
<p>OPTIONS 方法用来查询针对请求 URI 指定的资源支持的方法。</p>
</blockquote>
<ul>
<li>TRACE：追踪路径</li>
</ul>
<blockquote>
<p>TRACE 方法是让 Web 服务器端将之前的请求通信环回给客户端的方法。</p>
<p>发送请求时，在 Max-Forwards 首部字段中填入数值，每经过一个服务器端就将该数字减 1，当数值刚好减到 0 时，就停止继续传输，最后接收到请求的服务器端则返回状态码 200 OK 的响应。</p>
<p>客户端通过 TRACE 方法可以查询发送出去的请求是怎样被加工修改 / 篡改的。这是因为，请求想要连接到源目标服务器可能会通过代理中转，TRACE 方法就是用来确认连接过程中发生的一系列操作。</p>
<p>但是，TRACE 方法本来就不怎么常用，再加上它容易引发 XST（Cross-Site Tracing，跨站追踪）攻击，通常就更不会用到了。</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/10/18/http-notes-part-1/199878621.jpg" alt="使用TRACE方法的请求·响应的例子" title>
                </div>
                <div class="image-caption">使用TRACE方法的请求·响应的例子</div>
            </figure>
<ul>
<li>CONNECT：要求用隧道协议连接代理</li>
</ul>
<blockquote>
<p>CONNECT 方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。主要使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加 密后经网络隧道传输。</p>
</blockquote>
<h3 id="2-6-使用方法下达命令"><a href="#2-6-使用方法下达命令" class="headerlink" title="2.6 使用方法下达命令"></a>2.6 使用方法下达命令</h3><p>向请求 URI 指定的资源发送请求报文时，采用称为方法的命令。</p>
<p>方法的作用在于，可以指定请求的资源按期望产生某种行为。方法中有 GET、POST 和 HEAD 等。</p>
<p>下表列出了 HTTP/1.0 和 HTTP/1.1 支持的方法。另外，方法名区分大小写，注意要用大写字母。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">支持的 HTTP 协议版本</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">GET</td>
<td style="text-align:center">获取资源</td>
<td style="text-align:center">1.0、1.1</td>
</tr>
<tr>
<td style="text-align:center">POST</td>
<td style="text-align:center">传输实体主体</td>
<td style="text-align:center">1.0、1.1</td>
</tr>
<tr>
<td style="text-align:center">PUT</td>
<td style="text-align:center">传输文件</td>
<td style="text-align:center">1.0、1.1</td>
</tr>
<tr>
<td style="text-align:center">HEAD</td>
<td style="text-align:center">获得报文首部</td>
<td style="text-align:center">1.0、1.1</td>
</tr>
<tr>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">删除文件</td>
<td style="text-align:center">1.0、1.1</td>
</tr>
<tr>
<td style="text-align:center">OPTIONS</td>
<td style="text-align:center">询问支持的方法</td>
<td style="text-align:center">1.1</td>
</tr>
<tr>
<td style="text-align:center">TRACE</td>
<td style="text-align:center">追踪路径</td>
<td style="text-align:center">1.1</td>
</tr>
<tr>
<td style="text-align:center">CONNECT</td>
<td style="text-align:center">要求用隧道协议连接代理</td>
<td style="text-align:center">1.1</td>
</tr>
<tr>
<td style="text-align:center">LINK</td>
<td style="text-align:center">建立和资源之间的联系</td>
<td style="text-align:center">1.1</td>
</tr>
<tr>
<td style="text-align:center">UNLINE</td>
<td style="text-align:center">断开连接关系</td>
<td style="text-align:center">1.1</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>LINK 和 UNLINK 已被 HTTP/1.1 废弃，不再支持。</p>
</blockquote>
<h3 id="2-7-持久连接节省通信量"><a href="#2-7-持久连接节省通信量" class="headerlink" title="2.7 持久连接节省通信量"></a>2.7 持久连接节省通信量</h3><p>HTTP 协议的初始版本中，每进行一次 HTTP 通信就要断开一次 TCP 连接。</p>
<p>以当年的通信情况来说，因为都是些容量很小的文本传输，所以即使这样也没有多大问题。可随着 HTTP 的普及，文档中包含大量图片的情况多了起来。</p>
<p>比如，使用浏览器浏览一个包含多张图片的 HTML 页面时，在发送请求访问 HTML 页面资源的同时，也会请求该 HTML 页面里包含的其他资源。因此，每次的请求都会造成无谓的 TCP 连接建立和断开，增加通信量的开销。</p>
<h4 id="2-7-1-持久连接"><a href="#2-7-1-持久连接" class="headerlink" title="2.7.1 持久连接"></a>2.7.1 持久连接</h4><p>为解决上述 TCP 连接的问题，HTTP/1.1 和一部分的 HTTP/1.0 想出了<strong>持久连接</strong>（HTTP Persistent Connections，也称为 HTTP keep-alive 或 HTTP connection reuse）的方法。持久连接的特点是，<strong>只要任意一端没有明确提出断开连接，则保持 TCP 连接状态</strong>。</p>
<blockquote>
<p>持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相应提高了。</p>
</blockquote>
<h4 id="2-7-2-管线化"><a href="#2-7-2-管线化" class="headerlink" title="2.7.2 管线化"></a>2.7.2 管线化</h4><p>持久连接使得多数请求以<strong>管线化</strong>（pipelining）方式发送成为可能。从前发送请求后需等待并收到响应，才能发送下一个请求。管线化技术出现后，不用等待响应亦可直接发送下一个请求。</p>
<p>这样就能够做到<strong>同时并行发送多个请求</strong>，而不需要一个接一个地等待响应了。</p>
<blockquote>
<p>比如，当请求一个包含 10 张图片的 HTML Web 页面，与挨个连接相比，用<strong>持久连接</strong>可以让<strong>请求更快结束</strong>。而<strong>管线化技术</strong>则<strong>比持久连接还要快</strong>。请求数越多，时间差就越明显。</p>
</blockquote>
<h3 id="2-8-使用-Cookie-的状态管理"><a href="#2-8-使用-Cookie-的状态管理" class="headerlink" title="2.8 使用 Cookie 的状态管理"></a>2.8 使用 Cookie 的状态管理</h3><p>HTTP 是<strong>无状态协议</strong>，它不对之前发生过的请求和响应的状态进行管理。也就是说，无法根据之前的状态进行本次的请求处理。</p>
<p>保留无状态协议这个特征的同时又要解决类似的矛盾问题，于是引入了 <strong>Cookie 技术</strong>。Cookie 技术通过<strong>在请求和响应报文中写入 Cookie 信息</strong>来<strong>控制客户端的状态</strong>。</p>
<blockquote>
<p>Cookie 会根据从服务器端发送的响应报文内的一个叫做 <code>Set-Cookie</code> 的首部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出去。</p>
</blockquote>
<p>服务器端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪一个客户端发来的连接请求，然后<strong>对比服务器上的记录</strong>，最后<strong>得到之前的状态信息</strong>。</p>
<p>在发生 Cookie 交互的场景中，HTTP 请求报文和响应报文的内容如下。</p>
<ul>
<li>请求报文（没有 Cookie 信息的状态）</li>
</ul>
<pre><code class="lang-http">GET /reader/ HTTP/1.1
Host: hackr.jp
*首部字段内没有Cookie的相关信息
</code></pre>
<ul>
<li>响应报文（服务器端生成 Cookie 信息）</li>
</ul>
<pre><code class="lang-http">HTTP/1.1 200 OK
Date: Thu, 12 Jul 2012 07:12:20 GMT
Server: Apache
＜Set-Cookie: sid=1342077140226724; path=/; expires=Wed,
10-Oct-12 07:12:20 GMT＞
Content-Type: text/plain; charset=UTF-8
</code></pre>
<ul>
<li>请求报文（自动发送保存着的 Cookie 信息）</li>
</ul>
<pre><code class="lang-http">GET /image/ HTTP/1.1
Host: hackr.jp
Cookie: sid=1342077140226724
</code></pre>
<div><strong>🚩推荐阅读</strong>（由<a href="https://github.com/huiwang/hexo-recommended-posts">hexo文章推荐插件</a>驱动）<ul><li><a href="https://abelsu7.top/2019/03/18/understanding-linux-kernel/">Linux 内核笔记 1：绪论</a></li><li><a href="https://abelsu7.top/2019/03/11/core-java-notes-5/">Java 笔记 5：集合</a></li><li><a href="https://abelsu7.top/2019/03/11/core-java-notes-6/">Java 笔记 6：异常、断言和日志</a></li><li><a href="https://abelsu7.top/2019/03/06/network-protocol-4-tcp/">网络协议笔记 4：传输层之 TCP 协议</a></li><li><a href="https://qinyuanpei.github.io/posts/2015300310/">Referrer还是Referer? 一个迷人的错误</a></li><li><a href="https://blog.yuanpei.me/posts/2015300310/">Referrer还是Referer? 一个迷人的错误</a></li></ul></div>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-09-01T13:04:11.334Z" itemprop="dateUpdated">2019-09-01 21:04:11</time>
</span><br>


        
        文章发布地址：<a href="/2018/10/18/http-notes-part-1/" target="_blank" rel="external">https://abelsu7.top/2018/10/18/http-notes-part-1/</a>
        
    </div>
    
    <footer>
        <a href="https://abelsu7.top">
            <img src="/img/fong.jpg" alt="Abel Su">
            Abel Su
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP/">TCP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书/">读书</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2018/10/18/http-notes-part-1/&title=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2018/10/18/http-notes-part-1/&title=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&source=
                
                    
                    
                
..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2018/10/18/http-notes-part-1/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&url=https://abelsu7.top/2018/10/18/http-notes-part-1/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2018/10/18/http-notes-part-1/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/10/22/http-notes-part-2/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HTTP 笔记 2：HTTP 报文信息及状态码</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/09/28/awesome-coder/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">历史上 12 位伟大的程序员</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment v" id="vcomments"></div>
    <!-- <div class="comment" id="comment"></div> -->
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
    <!-- <script src="//t1.aixinxi.net/o_1c3n4pim01nl3jg91b6l1kjtkvsa.js"></script> -->
    <!-- <script src="/js/Valine.min.js"></script> -->
    <!-- <script src="https://cdnjs.cat.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <script src="//cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            av: AV,
            // el: '#comments',
            el: '#vcomments',
            emoticon_url: 'https://abelsu7.top/alu', //表情图片网址
            emoticon_list: ["赞一个.png","坐等.png","长草.png","阴暗.png","邪恶.png","小眼睛.png","想一想.png","献黄瓜.png","献花.png","喜极而泣.png","无语.png","无所谓.png","无奈.png","投降.png","深思.png","期待.png","狂汗.png","蜡烛.png","看不见.png","惊喜.png","击掌.png","欢呼.png","得意.png","不出所料.png","观察.png"],//表情图片文件名
            // notify: 'false' == 'false',
            // verify: 'false' == 'false',
            // notify: 'false',
            // verify: 'false',
            notify: false,
            verify: false,
            appId: "aP2YQo0mfrRpTLrLb1bchILb-gzGzoHsz",
            appKey: "Cp82umQdGScRRFUYLmob6yyK",
            avatar: "mp",
            placeholder: "Write a comment",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢支持！
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-item switch">切换</span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


            <p>
                
                    <span>
                        <a href="/atom.xml" target="_blank" class="rss" title="rss">
                            <i class="icon icon-lg icon-rss"></i>
                        </a>
                    </span>
                    
                        <span>
                            博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a>
                        </span>
            </p>
    </div>
    <div class="bottom">
        <p>
            <span>
                Abel Su &copy;
                    
                        2018 -
                            
                                2020
            </span>
            <span>
                
                    <a href="http://beian.miit.gov.cn/" target="_blank">
                        粤ICP备16068788号-2
                    </a>
                    <br>
                    
                        Power by
                        <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
                        <a href="https://github.com/abelsu7/hexo-theme-indigo-plus" target="_blank">indigo plus</a>
                        <p>Hosted by <a href="https://cloud.tencent.com/product/cos" target="_blank" style="font-weight: bold">腾讯云 COS</a></p>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>
<a href="javascript:;" id="gobottom" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-comments"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://abelsu7.top/2018/10/18/http-notes-part-1/&title=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&pic=https://abelsu7.top/img/fong.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://abelsu7.top/2018/10/18/http-notes-part-1/&title=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&source=
                
                    
                    
                
..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://abelsu7.top/2018/10/18/http-notes-part-1/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HTTP 笔记 1：Web 基础及简单的 HTTP 协议》 — Keep Coding&url=https://abelsu7.top/2018/10/18/http-notes-part-1/&via=https://abelsu7.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://abelsu7.top/2018/10/18/http-notes-part-1/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMElEQVR42u3aQW7DMAwF0dz/0i5QdFGgtTWfdIOaGq0CJ471vCBIiq8XXsfnOvv8fZ1dP/uHn085+/aGJUOGjMcyjst1zSDU6y1eXyF7kyFDxj4Msi0OSwM0ecpizzJkyJDRoNZSSRkyZMi4N+DyQjRNPWXIkCEjLWJrJe6B15tqcRkyZDyQ0T8Y+LvPbz3fkCFDxr9kHOHiDf000azt5+sfZMiQMZqRbqjT1ifFbad4liFDxg4M0tZP76o10dJQLkOGjN0YnZoxDbu17aKAK0OGjKEMfttdqWFnsOyXu2TIkDGUkbbj+0G2Npax4MmQIWM0g49H1I42+ZXOL2XIkDGbwW+oNffJ6+DHpegkVoYMGUMZ6WAEabehx+ND00XiKEOGjNEMVBziE8M+IG26yZAhYzdG+ke83A0e3ziWkCFDxm6Mu1r5fNRs0RHEV2TIkDGV0U/OaoNf6RDYIrjLkCFjA0Y6tpXem74sfowqQ4aMHRi8XORlatqeS4vkuNEmQ4aMxzJ4m4yUsrWQnb6URVIoQ4aMoYx0qCIdlUhTz3gnMmTIGM3oJ3ydQ8qgNCXFrQwZMoYyjnCRQMlL0LSFd/qtDBkyRjPSYMdHK8hj0kDfOjCQIUPGwxm1INspbmtHqsXMUYYMGYMYvDStpXT9UnbxmmTIkCGjTeWDYrWxDBkyZMjoDHulgx3puJgMGTL2YZAiloTXfhJZTD1lyJAxmpEWkLz1VmPXRsdkyJAxlPEB0S5Bz6eF+IAAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/prism.min.js?v=1.7.2"></script>
<script src="/js/prism-vim.min.js?v=1.7.2"></script>
</body>
</html>
